#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License, Version 1.0 only
# (the "License").  You may not use this file except in compliance
# with the License.
#
# A full copy of the text of the CDDL should have accompanied this
# source.  A copy of the CDDL is also available via the Internet at
# http://www.opensource.org/licenses/cddl1.txt
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#
#
# Copyright (c) 2013, J. Schilling
#

This is the new maintained version of the Bourne Shell.

It fixes all well known bugs from the SVr4 Bourne Shell documented at:
http://www.in-ulm.de/~mascheck/bourne/.

This version of the Bourne Shell adds the following features:

-	fixes all Bourne Shell bugs that have been documented since the late
	1980s but never fixed by AT&T or Sun. See

		http://www.in-ulm.de/~mascheck/bourne/

	for a list of well known problems of the old Bourne Shell.

-	converted to use ANSI C prototypes to ensure type correctness.

-	converted from using sbrk(2) to malloc(3) to achieve portability
	and allows to use libc routines that depend on malloc().

-	fixes some previously unknown bugs in string handling that have been a
	result from removing a dependency on SIGSEV to auto-expand memory for 
	automatic string management as implemented in the original version
	from 1977.

-	Adds the Commandline History editor I developed in 1982 and implemented 
	in 1984 for my "bsh". Related new builtins:

	-	history		list the current listory
	-	savehistory	save the history to $HOME/.history

-	Adds the advanced alias mechanism from my "bsh" that is better than the
	alias implementation from ksh. Related new builtins:

	-	alias		add, change or list aliases
	-	unalias		remove aliases

-	Adds a new builtin "dosh" that allows to write intrinsic "shell scripts"
	via aliases.

-	Adds "pushd"/"popd"/"dirs" builtins

-	Adds the "repeat" builtin

-	Makes the "umask" builtin aware of symbolic file modes

-	Adds long options to the "set" builtin (see also "set -o" or "set +o")

-	Adds a mapper for e.g. cursor keys that works reliably in contrast to
	what is known from ksh and bash that sometimes do not map strings and
	thus insert raw key strings. Related new builtins:

	-	map		list and manipulate input mappings

-	Implements a runtime switch between the "pf" version behavior and the
	standard behavior that allows to decide whether privileged commands
	should be enabled or not. Use "set -P" to enable the "pf" shell
	behavior.
	

Note that this version of the Bourne Shell needs three additional shared
libraries:

-	libshedit	The Shell history editing library taken from "bsh"

-	libxtermcap	A true TERMCAP implementation with *-BSD TERMPATH
			features - a dependency from libshedit

-	libschily	A general portability library - a dependency from
			libshedit

These libraries are installed in /lib instead of /usr/lib to allow the
Bourne Shell to be used on installations where / and /usr are on different
filesystems. Install a file /root/.termcap with a minimum set of termcap
entries to permit to use correct cursor mappings even when in single user
mode with no /usr filesystem mounted.

As these libraries are lazyloaded, they are not used in case the Bourne Shell
just interprets shell scripts but is not in interactive mode.

Note that a file /root/.shrc is delivered together with this shell. This file
contains code to enable persistent shell aliases in interactive mode. Persistent
aliases are kept in the files: $(HOME)/.globals and $(PWD)/.locals, to make
directory specific local aliases safe, $(PWD)/.locals must be owned by the
effective UID of the shell process or enabled via the aliasowner flag. Call
e.g. "bosh -o aliasowner=joerg" to allow a root shell to read the persistent
aliases for user joerg.

	Jörg Schilling
