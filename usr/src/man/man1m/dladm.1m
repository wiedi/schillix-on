'\" te
.\" Copyright (c) 2008, Sun Microsystems, Inc. All Rights Reserved
.\" Copyright (c) 2012-2013, J. Schilling
.\" Copyright (c) 2013, Andreas Roehler
.\"
.\" Sun Microsystems, Inc. gratefully acknowledges The Open Group for
.\" permission to reproduce portions of its copyrighted documentation.
.\" Original documentation from The Open Group can be obtained online
.\" at http://www.opengroup.org/bookstore/.
.\"
.\" The Institute of Electrical and Electronics Engineers and The Open Group,
.\" have given us permission to reprint portions of their documentation.
.\"
.\" In the following statement, the phrase "this text" refers to portions
.\" of the system documentation.
.\"
.\" Portions of this text are reprinted and reproduced in electronic form in
.\" the Sun OS Reference Manual, from IEEE Std 1003.1, 2004 Edition, Standard
.\" for Information Technology -- Portable Operating System Interface (POSIX),
.\" The Open Group Base Specifications Issue 6, Copyright (C) 2001-2004 by the
.\" Institute of Electrical and Electronics Engineers, Inc and The Open Group.
.\" In the event of any discrepancy between these versions and the original
.\" IEEE and The Open Group Standard, the original IEEE and The Open Group
.\" Standard is the referee document.
.\"
.\" The original Standard can be obtained online at
.\" http://www.opengroup.org/unix/online.html.
.\"
.\" This notice shall appear on any product containing this material.
.\"
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License ("CDDL"), version 1.0.
.\" You may only use this file in accordance with the terms of version
.\" 1.0 of the CDDL.
.\"
.\" A full copy of the text of the CDDL should have accompanied this
.\" source.  A copy of the CDDL is also available via the Internet at
.\" http://www.opensource.org/licenses/cddl1.txt
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.TH dladm 1M "23 Sep 2009" "SunOS 5.11" "System Administration Commands"
.SH NAME
dladm \- administer data links
.SH SYNOPSIS
.LP
.nf
\fBdladm show-link\fR [\fB-P\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIlink\fR]
\fBdladm rename-link\fR [\fB-R\fR \fIroot-dir\fR] \fIlink\fR \fInew-link\fR
.fi

.LP
.nf
\fBdladm delete-phys\fR \fIphys-link\fR
\fBdladm show-phys\fR [\fB-P\fR] [\fB-m\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fB-H\fR] [\fIphys-link\fR]
.fi

.LP
.nf
\fBdladm create-aggr\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-P\fR \fIpolicy\fR] [\fB-L\fR \fImode\fR]
     [\fB-T\fR \fItime\fR] [\fB-u\fR \fIaddress\fR] \fB-l\fR \fIether-link1\fR [\fB-l\fR \fIether-link2\fR.\|.\|.] \fIaggr-link\fR
\fBdladm modify-aggr\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-P\fR \fIpolicy\fR] [\fB-L\fR \fImode\fR]
     [\fB-T\fR \fItime\fR] [\fB-u\fR \fIaddress\fR] \fIaggr-link\fR
\fBdladm delete-aggr\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIaggr-link\fR
\fBdladm add-aggr\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIether-link1\fR [\fB-l\fR \fIether-link2\fR.\|.\|.]
     \fIaggr-link\fR
\fBdladm remove-aggr\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIether-link1\fR [\fB-l\fR \fIether-link2\fR.\|.\|.]
     \fIaggr-link\fR
\fBdladm show-aggr\fR [\fB-PLx\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]]
     [\fIaggr-link\fR]
.fi

.LP
.nf
\fBdladm create-bridge\fR [\fB-P\fR \fIprotect\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-p\fR \fIpriority\fR]
     [\fB-m\fR \fImax-age\fR] [\fB-h\fR \fIhello-time\fR] [\fB-d\fR \fIforward-delay\fR] [\fB-f\fR \fIforce-protocol\fR]
     [\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.fi

.LP
.nf
\fBdladm modify-bridge\fR [\fB-P\fR \fIprotect\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-p\fR \fIpriority\fR]
     [\fB-m\fR \fImax-age\fR] [\fB-h\fR \fIhello-time\fR] [\fB-d\fR \fIforward-delay\fR] [\fB-f\fR \fIforce-protocol\fR]
     \fIbridge-name\fR
.fi

.LP
.nf
\fBdladm delete-bridge\fR [\fB-R\fR \fIroot-dir\fR] \fIbridge-name\fR
.fi

.LP
.nf
\fBdladm add-bridge\fR [\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIlink\fR [\fB-l\fR \fIlink\fR.\|.\|.]\fIbridge-name\fR
.fi

.LP
.nf
\fBdladm remove-bridge\fR [\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIlink\fR [\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.fi

.LP
.nf
\fBdladm show-bridge\fR [\fB-flt\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]] [[\fB-p\fR] \fB-o\fR \fIfield\fR,.\|.\|.]
     [\fIbridge-name\fR]
.fi

.LP
.nf
\fBdladm create-vlan\fR [\fB-ft\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIether-link\fR \fB-v\fR \fIvid\fR [\fIvlan-link\fR]
\fBdladm delete-vlan\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIvlan-link\fR
\fBdladm show-vlan\fR [\fB-P\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIvlan-link\fR]
.fi

.LP
.nf
\fBdladm scan-wifi\fR [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIwifi-link\fR]
\fBdladm connect-wifi\fR [\fB-e\fR \fIessid\fR] [\fB-i\fR \fIbssid\fR] [\fB-k\fR \fIkey\fR,.\|.\|.]
     [\fB-s\fR none | wep | wpa ] [\fB-a\fR open | shared] [\fB-b\fR bss | ibss] [\fB-c\fR]
     [\fB-m\fR a | b | g] [\fB-T\fR \fItime\fR] [\fIwifi-link\fR]
\fBdladm disconnect-wifi\fR [\fB-a\fR] [\fIwifi-link\fR]
\fBdladm show-wifi\fR [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIwifi-link\fR]
.fi

.LP
.nf
\fBdladm show-ether\fR [\fB-x\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIether-link\fR]
.fi

.LP
.nf
\fBdladm set-linkprop\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-p\fR \fIprop\fR=\fIvalue\fR[,.\|.\|.] \fIlink\fR
\fBdladm reset-linkprop\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-p\fR \fIprop\fR[,.\|.\|.]] \fIlink\fR
\fBdladm show-linkprop\fR [\fB-P\fR] [[\fB-c\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fB-p\fR \fIprop\fR[,.\|.\|.]] [\fIlink\fR]
.fi

.LP
.nf
\fBdladm create-secobj\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-f\fR \fIfile\fR] \fB-c\fR \fIclass\fR \fIsecobj\fR
\fBdladm delete-secobj\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIsecobj\fR[,.\|.\|.]
\fBdladm show-secobj\fR [\fB-P\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIsecobj\fR,.\|.\|.]
.fi

.LP
.nf
\fBdladm create-vnic\fR [\fB-t\fR] \fB-l\fR \fIlink\fR [\fB-R\fR \fIroot-dir\fR] [\fB-m\fR \fIvalue\fR | auto |
     {factory \fB-n\fR \fIslot-identifier\fR]} | {random [\fB-r\fR \fIprefix\fR]}]
     [\fB-v\fR \fIvlan-id\fR] [\fB-p\fR \fIprop\fR=\fIvalue\fR[,.\|.\|.]] \fIvnic-link\fR
\fBdladm delete-vnic\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIvnic-link\fR
\fBdladm show-vnic\fR [\fB-pP\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]] [\fB-o\fR \fIfield\fR[,.\|.\|.]]
     [\fB-l\fR \fIlink\fR] [\fIvnic-link\fR]
.fi

.LP
.nf
\fBdladm create-etherstub\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIetherstub\fR
\fBdladm delete-etherstub\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIetherstub\fR
\fBdladm show-etherstub\fR [\fIetherstub\fR]
.fi

.LP
.nf
\fBdladm create-iptun\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-T\fR \fItype\fR [\fB-s\fR \fItsrc\fR] [\fB-d\fR \fItdst\fR]
     \fIiptun-link\fR
\fBdladm modify-iptun\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-s\fR \fItsrc\fR] [\fB-d\fR \fItdst\fR] \fIiptun-link\fR
\fBdladm delete-iptun\fR [\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fIiptun-link\fR
\fBdladm show-iptun\fR [\fB-P\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIiptun-link\fR]
.fi

.LP
.nf
\fBdladm show-usage\fR [\fB-a\fR] \fB-f\fR \fIfilename\fR [\fB-p\fR \fIplotfile\fR \fB-F\fR \fIformat\fR] [\fB-s\fR \fItime\fR]
     [\fB-e\fR \fItime\fR] [\fIlink\fR]
.fi

.SH DESCRIPTION
.sp
.LP
The
.B dladm
command is used to administer data-links. A data-link is
represented in the system as a
.B "STREAMS DLPI"
(v2) interface which can
be plumbed under protocol stacks such as
.BR TCP/IP .
Each data-link relies
on either a single network device or an aggregation of devices to send
packets to or receive packets from a network.
.sp
.LP
Each
.B dladm
subcommand operates on one of the following objects:
.sp
.ne 2
.mk
.na
.B link
.ad
.sp .6
.RS 4n
A datalink, identified by a name. In general, the name can use any
alphanumeric characters (or the underscore,
.BR _ ),
but must start with an
alphabetic character and end with a number. A datalink name can be at most
31 characters, and the ending number must be between 0 and 4294967294
(inclusive). The ending number must not begin with a zero. Datalink names
between 3 and 8 characters are recommended.
.sp
Some subcommands operate only on certain types or classes of datalinks. For
those cases, the following object names are used:
.sp
.ne 2
.mk
.na
.B phys-link
.ad
.sp .6
.RS 4n
A physical datalink.
.RE

.sp
.ne 2
.mk
.na
.B vlan-link
.ad
.sp .6
.RS 4n
A VLAN datalink.
.RE

.sp
.ne 2
.mk
.na
.B aggr-link
.ad
.sp .6
.RS 4n
An aggregation datalink (or a key; see NOTES).
.RE

.sp
.ne 2
.mk
.na
.B ether-link
.ad
.sp .6
.RS 4n
A physical Ethernet datalink.
.RE

.sp
.ne 2
.mk
.na
.B wifi-link
.ad
.sp .6
.RS 4n
A WiFi datalink.
.RE

.sp
.ne 2
.mk
.na
.B vnic-link
.ad
.sp .6
.RS 4n
A virtual network interface created on a link or an
.BR etherstub .
It is
a pseudo device that can be treated as if it were an network interface card
on a machine.
.RE

.sp
.ne 2
.mk
.na
.B iptun-link
.ad
.sp .6
.RS 4n
An IP tunnel link.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dev
.ad
.sp .6
.RS 4n
A network device, identified by concatenation of a driver name and an
instance number.
.RE

.sp
.ne 2
.mk
.na
.B etherstub
.ad
.sp .6
.RS 4n
An Ethernet stub can be used instead of a physical NIC to create VNICs.
VNICs created on an
.B etherstub
will appear to be connected through a
virtual switch, allowing complete virtual networks to be built without
physical hardware.
.RE

.sp
.ne 2
.mk
.na
.B bridge
.ad
.sp .6
.RS 4n
A bridge instance, identified by an administratively-chosen name. The name
may use any alphanumeric characters or the underscore,
.BR _ ,
but must
start and end with an alphabetic character. A bridge name can be at most 31
characters. The name
.B default
is reserved, as are all names starting
with
.BR SUNW .
.sp
Note that appending a zero (\fB0\fR) to a bridge name produces a valid link
name, used for observability.
.RE

.sp
.ne 2
.mk
.na
.B secobj
.ad
.sp .6
.RS 4n
A secure object, identified by an administratively-chosen name. The name
can use any alphanumeric characters, as well as underscore
.RB ( _ ),
period
(\fB\&.\fR), and hyphen
.RB ( - ).
A secure object name can be at most 32
characters.
.RE

.SS "Options"
.sp
.LP
Each
.B dladm
subcommand has its own set of options. However, many of
the subcommands have the following as a common option:
.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
Specifies an alternate root directory where the operation-such as creation,
deletion, or renaming-should apply.
.RE

.SS "SUBCOMMANDS"
.sp
.LP
The following subcommands are supported:
.sp
.ne 2
.mk
.na
.B dladm show-link
[\fB-P\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]]
[[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]][\fIlink\fR]\fR
.ad
.sp .6
.RS 4n
Show link configuration information (the default) or statistics, either for
all datalinks or for the specified link
.IR link .
By default, the system
is configured with one datalink for each known network device.
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. When
not modified by the
.B -s
option (described below), the field name must
be one of the fields listed below, or the special value
.B all
to display
all fields. By default (without
.BR -o ),
.B show-link
displays all
fields.
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the datalink.
.RE

.sp
.ne 2
.mk
.na
.B CLASS
.ad
.sp .6
.RS 4n
The class of the datalink.
.B dladm
distinguishes between the following
classes:
.sp
.ne 2
.mk
.na
.B phys
.ad
.sp .6
.RS 4n
A physical datalink. The
.B show-phys
subcommand displays more detail
for this class of datalink.
.RE

.sp
.ne 2
.mk
.na
.B aggr
.ad
.sp .6
.RS 4n
An IEEE 802.3ad link aggregation. The
.B show-aggr
subcommand displays
more detail for this class of datalink.
.RE

.sp
.ne 2
.mk
.na
.B vlan
.ad
.sp .6
.RS 4n
A VLAN datalink. The
.B show-vlan
subcommand displays more detail for
this class of datalink.
.RE

.sp
.ne 2
.mk
.na
.B vnic
.ad
.sp .6
.RS 4n
A virtual network interface. The
.B show-vnic
subcommand displays more
detail for this class of datalink.
.RE

.RE

.sp
.ne 2
.mk
.na
.B MTU
.ad
.sp .6
.RS 4n
The maximum transmission unit size for the datalink being displayed.
.RE

.sp
.ne 2
.mk
.na
.B STATE
.ad
.sp .6
.RS 4n
The link state of the datalink. The state can be
.BR up ,
.BR down ,
or
.BR unknown .
.RE

.sp
.ne 2
.mk
.na
.B BRIDGE
.ad
.sp .6
.RS 4n
The name of the bridge to which this link is assigned, if any.
.RE

.sp
.ne 2
.mk
.na
.B OVER
.ad
.sp .6
.RS 4n
The physical datalink(s) over which the datalink is operating. This applies
to
.BR aggr ,
.BR bridge ,
and
.B vlan
classes of datalinks. A VLAN is
created over a single physical datalink, a bridge has multiple attached
links, and an aggregation is comprised of one or more physical datalinks.
.RE

When the
.B -o
option is used in conjunction with the
.B -s
option,
used to display link statistics, the field name must be one of the fields
listed below, or the special value
.B all
to display all fields
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the datalink.
.RE

.sp
.ne 2
.mk
.na
.B IPACKETS
.ad
.sp .6
.RS 4n
Number of packets received on this link.
.RE

.sp
.ne 2
.mk
.na
.B RBYTES
.ad
.sp .6
.RS 4n
Number of bytes received on this link.
.RE

.sp
.ne 2
.mk
.na
.B IERRORS
.ad
.sp .6
.RS 4n
Number of input errors.
.RE

.sp
.ne 2
.mk
.na
.B OPACKETS
.ad
.sp .6
.RS 4n
Number of packets sent on this link.
.RE

.sp
.ne 2
.mk
.na
.B OBYTES
.ad
.sp .6
.RS 4n
Number of bytes received on this link.
.RE

.sp
.ne 2
.mk
.na
.B OERRORS
.ad
.sp .6
.RS 4n
Number of output errors.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display the persistent link configuration.
.RE

.sp
.ne 2
.mk
.na
.BR -s ,
.B --statistics
.ad
.sp .6
.RS 4n
Display link statistics.
.RE

.sp
.ne 2
.mk
.na
\fB-i\fR \fIinterval\fR, \fB--interval\fR=\fIinterval\fR
.ad
.sp .6
.RS 4n
Used with the
.B -s
option to specify an interval, in seconds, at which
statistics should be displayed. If this option is not specified, statistics
will be displayed only once.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm rename-link
[\fB-R\fR \fIroot-dir\fR] \fIlink\fR
.I new-link
.ad
.sp .6
.RS 4n
Rename
.I link
to
.IR new-link .
This is used to give a link a
meaningful name, or to associate existing link configuration such as link
properties of a removed device with a new device. See the \fBEXAMPLES\fR
section for specific examples of how this subcommand is used.
.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-phys
.I phys-link
.ad
.sp .6
.RS 4n
This command is used to delete the persistent configuration of a link
associated with physical hardware which has been removed from the system.
See the
.B EXAMPLES
section.
.RE

.sp
.ne 2
.mk
.na
.B dladm show-phys
[\fB-P\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]]
[\fB-H\fR] [\fIphys-link\fR]\fR
.ad
.sp .6
.RS 4n
Show the physical device and attributes of all physical links, or of the
named physical link. Without
.BR -P ,
only physical links that are
available on the running system are displayed.
.sp
.ne 2
.mk
.na
.B -H
.ad
.sp .6
.RS 4n
Show hardware resource usage, as returned by the NIC driver. Output from
.B -H
displays the following elements:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
A physical device corresponding to a NIC driver.
.RE

.sp
.ne 2
.mk
.na
.B GROUP
.ad
.sp .6
.RS 4n
A collection of rings.
.RE

.sp
.ne 2
.mk
.na
.B GROUPTYPE
.ad
.sp .6
.RS 4n
RX or TX. All rings in a group are of the same group type.
.RE

.sp
.ne 2
.mk
.na
.B RINGS
.ad
.sp .6
.RS 4n
A hardware resource used by a data link, subject to assignment by a driver
to different groups.
.RE

.sp
.ne 2
.mk
.na
.B CLIENTS
.ad
.sp .6
.RS 4n
MAC clients that are using the rings within a group.
.RE

.RE

.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR, \fB--output\fR=\fIfield\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.BR all ,
to display all fields. For each link, the following fields can be
displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the datalink.
.RE

.sp
.ne 2
.mk
.na
.B MEDIA
.ad
.sp .6
.RS 4n
The media type provided by the physical datalink.
.RE

.sp
.ne 2
.mk
.na
.B STATE
.ad
.sp .6
.RS 4n
The state of the link. This can be
.BR up ,
.BR down ,
or
.BR unknown .
.RE

.sp
.ne 2
.mk
.na
.B SPEED
.ad
.sp .6
.RS 4n
The current speed of the link, in megabits per second.
.RE

.sp
.ne 2
.mk
.na
.B DUPLEX
.ad
.sp .6
.RS 4n
For Ethernet links, the full/half duplex status of the link is displayed if
the link state is
.BR up .
The duplex is displayed as
.B unknown
in all
other cases.
.RE

.sp
.ne 2
.mk
.na
.B DEVICE
.ad
.sp .6
.RS 4n
The name of the physical device under this link.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
This option displays persistent configuration for all links, including
those that have been removed from the system. The output provides a
.B FLAGS
column in which the
.B r
flag indicates that the physical
device associated with a physical link has been removed. For such links,
.B delete-phys
can be used to purge the link's configuration from the
system.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm create-aggr
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-P\fR
\fIpolicy\fR] [\fB-L\fR \fImode\fR] [\fB-T\fR \fItime\fR] [\fB-u\fR
\fIaddress\fR] \fB-l\fR \fIether-link1\fR [\fB-l\fR \fIether-link2\fR.\|.\|.]
.I aggr-link
.ad
.sp .6
.RS 4n
Combine a set of links into a single IEEE 802.3ad link aggregation named
.IR aggr-link .
The use of an integer
.I key
to generate a link name for
the aggregation is also supported for backward compatibility. Many of the
.B *-aggr
subcommands below also support the use of a
.I key
to
refer to a given aggregation, but use of the aggregation link name is
preferred. See the
.B NOTES
section for more information on keys.
.sp
.B dladm
supports a number of port selection policies for an aggregation
of ports. (See the description of the
.B -P
option, below.) If you do not
specify a policy,
.B create-aggr
uses the default, the L4 policy,
described under the
.B -P
option.
.sp
.ne 2
.mk
.na
\fB-l\fR \fIether-link\fR, \fB--link\fR=\fIether-link\fR
.ad
.sp .6
.RS 4n
Each Ethernet link (or port) in the aggregation is specified using an
.B -l
option followed by the name of the link to be included in the
aggregation. Multiple links are included in the aggregation by specifying
multiple
.B -l
options. For backward compatibility with previous versions
of Solaris, the
.B dladm
command also supports the using the
.BR -d
option
.RB "(or " --dev )
with a device name to specify links by their
underlying device name. The other
.B *-aggr
subcommands that take
\fB-l\fRoptions also accept
.BR -d .
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the aggregation is temporary. Temporary aggregations last
until the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-P\fR \fIpolicy\fR, \fB--policy\fR=\fIpolicy\fR
.ad
.br
.na
\fR
.ad
.sp .6
.RS 4n
Specifies the port selection policy to use for load spreading of outbound
traffic. The policy specifies which
.I dev
object is used to send
packets. A policy is a list of one or more layers specifiers separated by
commas. A layer specifier is one of the following:
.sp
.ne 2
.mk
.na
.B L2
.ad
.sp .6
.RS 4n
Select outbound device according to source and destination
.BR MAC
addresses of the packet.
.RE

.sp
.ne 2
.mk
.na
.B L3
.ad
.sp .6
.RS 4n
Select outbound device according to source and destination
.BR IP
addresses of the packet.
.RE

.sp
.ne 2
.mk
.na
.B L4
.ad
.sp .6
.RS 4n
Select outbound device according to the upper layer protocol information
contained in the packet. For
.B TCP
and
.BR UDP ,
this includes source
and destination ports. For IPsec, this includes the
.B SPI
(Security
Parameters Index).
.RE

For example, to use upper layer protocol information, the following policy
can be used:
.sp
.in +2
.nf
-P L4
.fi
.in -2
.sp

Note that policy L4 is the default.
.sp
To use the source and destination
.B MAC
addresses as well as the source
and destination
.B IP
addresses, the following policy can be used:
.sp
.in +2
.nf
-P L2,L3
.fi
.in -2
.sp

.RE

.sp
.ne 2
.mk
.na
\fB-L\fR \fImode\fR, \fB--lacp-mode\fR=\fImode\fR
.ad
.sp .6
.RS 4n
Specifies whether
.B LACP
should be used and, if used, the mode in which
it should operate. Supported values are
.BR off ,
.B active
or
.BR passive .
.RE

.sp
.ne 2
.mk
.na
\fB-T\fR \fItime\fR, \fB--lacp-timer\fR=\fItime\fR
.ad
.br
.na
\fR
.ad
.sp .6
.RS 4n
Specifies the
.B LACP
.RB "timer value. The supported values are" " short"
or
.BR long jjj.
.RE

.sp
.ne 2
.mk
.na
\fB-u\fR \fIaddress\fR, \fB--unicast\fR=\fIaddress\fR
.ad
.sp .6
.RS 4n
Specifies a fixed unicast hardware address to be used for the aggregation.
If this option is not specified, then an address is automatically chosen
from the set of addresses of the component devices.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm modify-aggr
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-P\fR
\fIpolicy\fR] [\fB-L\fR \fImode\fR] [\fB-T\fR \fItime\fR] [\fB-u\fR
\fIaddress\fR] \fIaggr-link\fR
.ad
.sp .6
.RS 4n
Modify the parameters of the specified aggregation.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the modification is temporary. Temporary aggregations last
until the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-P\fR \fIpolicy\fR, \fB--policy\fR=\fIpolicy\fR
.ad
.sp .6
.RS 4n
Specifies the port selection policy to use for load spreading of outbound
traffic. See
.B "dladm create-aggr"
for a description of valid policy
values.
.RE

.sp
.ne 2
.mk
.na
\fB-L\fR \fImode\fR, \fB--lacp-mode\fR=\fImode\fR
.ad
.sp .6
.RS 4n
Specifies whether
.B LACP
should be used and, if used, the mode in which
it should operate. Supported values are
.BR off ,
.BR active ,
or
.BR passive .
.RE

.sp
.ne 2
.mk
.na
\fB-T\fR \fItime\fR, \fB--lacp-timer\fR=\fItime\fR
.ad
.br
.na
\fR
.ad
.sp .6
.RS 4n
Specifies the
.B LACP
.RB "timer value. The supported values are" " short"
or
.BR long .
.RE

.sp
.ne 2
.mk
.na
\fB-u\fR \fIaddress\fR, \fB--unicast\fR=\fIaddress\fR
.ad
.sp .6
.RS 4n
Specifies a fixed unicast hardware address to be used for the aggregation.
If this option is not specified, then an address is automatically chosen
from the set of addresses of the component devices.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-aggr
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I aggr-link
.ad
.sp .6
.RS 4n
Deletes the specified aggregation.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletion is temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm add-aggr
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR
\fIether-link1\fR [\fB--link\fR=\fIether-link2\fR.\|.\|.] \fIaggr-link\fR
.ad
.sp .6
.RS 4n
Adds links to the specified aggregation.
.sp
.ne 2
.mk
.na
\fB-l\fR \fIether-link\fR, \fB--link\fR=\fIether-link\fR
.ad
.sp .6
.RS 4n
Specifies an Ethernet link to add to the aggregation. Multiple links can be
added by supplying multiple
.B -l
options.
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the additions are temporary. Temporary additions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm remove-aggr
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR
\fIether-link1\fR [\fB--l\fR=\fIether-link2\fR.\|.\|.] \fIaggr-link\fR
.ad
.sp .6
.RS 4n
Removes links from the specified aggregation.
.sp
.ne 2
.mk
.na
\fB-l\fR \fIether-link\fR, \fB--link\fR=\fIether-link\fR
.ad
.sp .6
.RS 4n
Specifies an Ethernet link to remove from the aggregation. Multiple links
can be added by supplying multiple
.B -l
options.
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the removals are temporary. Temporary removal last until the
next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-aggr
[\fB-PLx\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]]
[[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]] [\fIaggr-link\fR]\fR
.ad
.sp .6
.RS 4n
Show aggregation configuration (the default),
.B LACP
information, or
statistics, either for all aggregations or for the specified aggregation.
.sp
By default (with no options), the following fields can be displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the aggregation link.
.RE

.sp
.ne 2
.mk
.na
.B POLICY
.ad
.sp .6
.RS 4n
The LACP policy of the aggregation. See the \fBcreate-aggr -P\fR
option for a description of the possible values.
.RE

.sp
.ne 2
.mk
.na
.B ADDRPOLICY
.ad
.sp .6
.RS 4n
Either
.BR auto ,
if the aggregation is configured to automatically
configure its unicast MAC address (the default if the
.B -u
option was
not used to create or modify the aggregation), or
.BR fixed ,
if
.BR -u
was used to set a fixed MAC address.
.RE

.sp
.ne 2
.mk
.na
.B LACPACTIVITY
.ad
.sp .6
.RS 4n
The LACP mode of the aggregation. Possible values are
.BR off ,
.BR active ,
or
.BR passive ,
as set by the
.B -l
option to
.B create-aggr
or \fBmodify-aggr\fR.
.RE

.sp
.ne 2
.mk
.na
.B LACPTIMER
.ad
.sp .6
.RS 4n
The LACP timer value of the aggregation as set by the
.B -T
option of
.B create-aggr
or \fBmodify-aggr\fR.
.RE

.sp
.ne 2
.mk
.na
.B FLAGS
.ad
.sp .6
.RS 4n
A set of state flags associated with the aggregation. The only possible
flag is
.BR f ,
which is displayed if the administrator forced the creation
the aggregation using the
.B -f
option to
.BR create-aggr .
Other flags
might be defined in the future.
.RE

The
.B show-aggr
command accepts the following options:
.sp
.ne 2
.mk
.na
.BR -L ,
.B --lacp
.ad
.sp .6
.RS 4n
Displays detailed
.B LACP
information for the aggregation link and each
underlying port. Most of the state information displayed by this option is
defined by IEEE 802.3. With this option, the following fields can be
displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the aggregation link.
.RE

.sp
.ne 2
.mk
.na
.B PORT
.ad
.sp .6
.RS 4n
The name of one of the underlying aggregation ports.
.RE

.sp
.ne 2
.mk
.na
.B AGGREGATABLE
.ad
.sp .6
.RS 4n
Whether the port can be added to the aggregation.
.RE

.sp
.ne 2
.mk
.na
.B SYNC
.ad
.sp .6
.RS 4n
If
.BR yes ,
the system considers the port to be synchronized and part of
the aggregation.
.RE

.sp
.ne 2
.mk
.na
.B COLL
.ad
.sp .6
.RS 4n
If
.BR yes ,
collection of incoming frames is enabled on the associated
port.
.RE

.sp
.ne 2
.mk
.na
.B DIST
.ad
.sp .6
.RS 4n
If
.BR yes ,
distribution of outgoing frames is enabled on the associated
port.
.RE

.sp
.ne 2
.mk
.na
.B DEFAULTED
.ad
.sp .6
.RS 4n
If
.BR yes ,
the port is using defaulted partner information (that is, has
not received LACP data from the LACP partner).
.RE

.sp
.ne 2
.mk
.na
.B EXPIRED
.ad
.sp .6
.RS 4n
If
.BR yes ,
the receive state of the port is in the
.BR EXPIRED
state.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -x ,
.B --extended
.ad
.sp .6
.RS 4n
Display additional aggregation information including detailed information
on each underlying port. With
.BR -x ,
the following fields can be
displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the aggregation link.
.RE

.sp
.ne 2
.mk
.na
.B PORT
.ad
.sp .6
.RS 4n
The name of one of the underlying aggregation ports.
.RE

.sp
.ne 2
.mk
.na
.B SPEED
.ad
.sp .6
.RS 4n
The speed of the link or port in megabits per second.
.RE

.sp
.ne 2
.mk
.na
.B DUPLEX
.ad
.sp .6
.RS 4n
The full/half duplex status of the link or port is displayed if the link
state is
.BR up .
The duplex status is displayed as
.B unknown
in all
other cases.
.RE

.sp
.ne 2
.mk
.na
.B STATE
.ad
.sp .6
.RS 4n
The link state. This can be
.BR up ,
.BR down ,
or
.BR unknown .
.RE

.sp
.ne 2
.mk
.na
.B ADDRESS
.ad
.sp .6
.RS 4n
The MAC address of the link or port.
.RE

.sp
.ne 2
.mk
.na
.B PORTSTATE
.ad
.sp .6
.RS 4n
This indicates whether the individual aggregation port is in the
.B standby
or
.B attached
state.
.RE

.RE

.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed above, or the special value
.BR all ,
to display all fields. The fields applicable to the \fB-o\fR
option are limited to those listed under each output mode. For example, if
using
.BR -L ,
only the fields listed under
.BR -L ,
above, can be used
with
.BR -o .
.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display the persistent aggregation configuration rather than the state of
the running system.
.RE

.sp
.ne 2
.mk
.na
.BR -s ,
.B --statistics
.ad
.sp .6
.RS 4n
Displays aggregation statistics.
.RE

.sp
.ne 2
.mk
.na
\fB-i\fR \fIinterval\fR, \fB--interval\fR=\fIinterval\fR
.ad
.sp .6
.RS 4n
Used with the
.B -s
option to specify an interval, in seconds, at which
statistics should be displayed. If this option is not specified, statistics
will be displayed only once.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm create-bridge
[ \fB-P\fR \fIprotect\fR] [\fB-R\fR
\fIroot-dir\fR] [ \fB-p\fR \fIpriority\fR] [ \fB-m\fR \fImax-age\fR] [
.B -h
\fIhello-time\fR] [ \fB-d\fR \fIforward-delay\fR] [ \fB-f\fR
\fIforce-protocol\fR] [\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.ad
.sp .6
.RS 4n
Create an 802.1D bridge instance and optionally assign one or more network
links to the new bridge. By default, no bridge instances are present on the
system.
.sp
In order to bridge between links, you must create at least one bridge
instance. Each bridge instance is separate, and there is no forwarding
connection between bridges.
.sp
.ne 2
.mk
.na
\fB-P\fR \fIprotect\fR, \fB--protect\fR=\fIprotect\fR
.ad
.sp .6
.RS 4n
Specifies a protection method. The defined protection methods are \fBstp\fR
for the Spanning Tree Protocol and trill for
.BR TRILL ,
which is used on
RBridges. The default value is
.BR stp .
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIpriority\fR, \fB--priority\fR=\fIpriority\fR
.ad
.sp .6
.RS 4n
Specifies the Bridge Priority. This sets the IEEE STP priority value for
determining the root bridge node in the network. The default value is
.BR 32768 .
Valid values are
.B 0
.RB "(highest priority) to" " 61440"
(lowest priority), in increments of 4096.
.sp
If a value not evenly divisible by 4096 is used, the system silently rounds
downward to the next lower value that is divisible by 4096.
.RE

.sp
.ne 2
.mk
.na
\fB-m\fR \fImax-age\fR, \fB--max-age\fR=\fImax-age\fR
.ad
.sp .6
.RS 4n
Specifies the maximum age for configuration information in seconds. This
sets the STP Bridge Max Age parameter. This value is used for all nodes in
the network if this node is the root bridge. Bridge link information older
than this time is discarded. It defaults to 20 seconds. Valid values are
from 6 to 40 seconds. See the
.B -d
.I forward-delay
parameter for
additional constraints.
.RE

.sp
.ne 2
.mk
.na
\fB-h\fR \fIhello-time\fR, \fB--hello-time\fR=\fIhello-time\fR
.ad
.sp .6
.RS 4n
Specifies the STP Bridge Hello Time parameter. When this node is the root
node, it sends Configuration BPDUs at this interval throughout the network.
The default value is 2 seconds. Valid values are from 1 to 10 seconds. See
the
.B -d
.I forward-delay
parameter for additional constraints.
.RE

.sp
.ne 2
.mk
.na
.B -d
.IR forward-delay ,
\fB--forward-delay\fR=\fIforward-delay\fR
.ad
.sp .6
.RS 4n
Specifies the STP Bridge Forward Delay parameter. When this node is the
root node, then all bridges in the network use this timer to sequence the
link states when a port is enabled. The default value is 15 seconds. Valid
values are from 4 to 30 seconds.
.sp
Bridges must obey the following two constraints:
.sp
.in +2
.nf
2 * (\fIforward-delay\fR - 1.0) >= \fImax-age\fR

\fImax-age\fR >= 2 * (\fIhello-time\fR + 1.0)
.fi
.in -2
.sp

Any parameter setting that would violate those constraints is treated as an
error and causes the command to fail with a diagnostic message. The message
provides valid alternatives to the supplied values.
.RE

.sp
.ne 2
.mk
.na
.B -f
.IR force-protocol ,
\fB--force-protocol\fR=\fIforce-protocol\fR
.ad
.sp .6
.RS 4n
Specifies the MSTP forced maximum supported protocol. The default value is
3. Valid values are non-negative integers. The current implementation does
not support RSTP or MSTP, so this currently has no effect. However, to
prevent MSTP from being used in the future, the parameter may be set to
.B 0
for STP only or
.B 2
for STP and RSTP.
.RE

.sp
.ne 2
.mk
.na
\fB-l\fR \fIlink\fR, \fB--link\fR=\fIlink\fR
.ad
.sp .6
.RS 4n
Specifies one or more links to add to the newly-created bridge. This is
similar to creating the bridge and then adding one or more links, as with
the
.B add-bridge
subcommand. However, if any of the links cannot be
added, the entire command fails, and the new bridge itself is not created.
To add multiple links on the same command line, repeat this option for each
link. You are permitted to create bridges without links. For more
information about link assignments, see the
.B add-bridge
subcommand.
.RE

Bridge creation and link assignment require the
.BR PRIV_SYS_DL_CONFIG
privilege. Bridge creation might fail if the optional bridging feature is
not installed on the system.
.RE

.sp
.ne 2
.mk
.na
.B dladm modify-bridge
[ \fB-P\fR \fIprotect\fR] [\fB-R\fR
\fIroot-dir\fR] [ \fB-p\fR \fIpriority\fR] [ \fB-m\fR \fImax-age\fR] [
.B -h
\fIhello-time\fR] [ \fB-d\fR \fIforward-delay\fR] [ \fB-f\fR
\fIforce-protocol\fR] [\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.ad
.sp .6
.RS 4n
Modify the operational parameters of an existing bridge. The options are
the same as for the
.B create-bridge
.RB "subcommand, except that the" " -l"
option is not permitted. To add links to an existing bridge, use the
.B add-bridge
subcommand.
.sp
Bridge parameter modification requires the
.BR PRIV_SYS_DL_CONFIG
privilege.
.RE

.sp
.ne 2
.mk
.na
.B dladm delete-bridge
[\fB-R\fR \fIroot-dir\fR]
.I bridge-name
.ad
.sp .6
.RS 4n
Delete a bridge instance. The bridge being deleted must not have any
attached links. Use the
.B remove-bridge
subcommand to deactivate links
before deleting a bridge.
.sp
Bridge deletion requires the
.B PRIV_SYS_DL_CONFIG
privilege.
.sp
The
.B -R
(\fB--root-dir\fR) option is the same as for the
.B create-bridge
subcommand.
.RE

.sp
.ne 2
.mk
.na
.B dladm add-bridge
[\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIlink\fR
[\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.ad
.sp .6
.RS 4n
Add one or more links to an existing bridge. If multiple links are
specified, and adding any one of them results in an error, the command fails
and no changes are made to the system.
.sp
Link addition to a bridge requires the
.BR PRIV_SYS_DL_CONFIG
privilege.
.sp
A link may be a member of at most one bridge. An error occurs when you
attempt to add a link that already belongs to another bridge. To move a link
from one bridge instance to another, remove it from the current bridge
before adding it to a new one.
.sp
The links assigned to a bridge must not also be VLANs, VNICs, or tunnels.
Only physical Ethernet datalinks, aggregation datalinks, wireless links, and
Ethernet stubs are permitted to be assigned to a bridge.
.sp
Links assigned to a bridge must all have the same MTU. This is checked when
the link is assigned. The link is added to the bridge in a deactivated form
if it is not the first link on the bridge and it has a differing MTU.
.sp
Note that systems using bridging should not set the
.BR eeprom (1M)
.B local-mac-address?
variable to false.
.sp
The options are the same as for the
.B create-bridge
subcommand.
.RE

.sp
.ne 2
.mk
.na
.B dladm remove-bridge
[\fB-R\fR \fIroot-dir\fR] \fB-l\fR \fIlink\fR
[\fB-l\fR \fIlink\fR.\|.\|.] \fIbridge-name\fR
.ad
.sp .6
.RS 4n
Remove one or more links from a bridge instance. If multiple links are
specified, and removing any one of them would result in an error, the
command fails and none are removed.
.sp
Link removal from a bridge requires the
.BR PRIV_SYS_DL_CONFIG
privilege.
.sp
The options are the same as for the
.B create-bridge
subcommand.
.RE

.sp
.ne 2
.mk
.na
.B dladm show-bridge
[\fB-flt\fR] [\fB-s\fR [\fB-i\fR
\fIinterval\fR]] [[\fB-p\fR] \fB-o\fR \fIfield\fR,.\|.\|.]
[\fIbridge-name\fR]\fR
.ad
.sp .6
.RS 4n
Show the running status and configuration of bridges, their attached links,
learned forwarding entries, and
.B TRILL
nickname databases. When showing
overall bridge status and configuration, the bridge name can be omitted to
show all bridges. The other forms require a specified bridge.
.sp
The show-bridge subcommand accepts the following options:
.sp
.ne 2
.mk
.na
\fB-i\fR \fIinterval\fR, \fB--interval\fR=\fIinterval\fR
.ad
.sp .6
.RS 4n
Used with the
.B -s
option to specify an interval, in seconds, at which
statistics should be displayed. If this option is not specified, statistics
will be displayed only once.
.RE

.sp
.ne 2
.mk
.na
.BR -s ,
.B --statistics
.ad
.sp .6
.RS 4n
Display statistics for the specified bridges or for a given bridge's
attached links. This option cannot be used with the \fB-f\fR and \fB-t\fR
options.
.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parsable format. See "Parsable Output
Format," below.
.RE

.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field names are described below. The special value all displays all fields.
Each set of fields has its own default set to display when
.B -o
is not
specified.
.RE

By default, the
.B show-bridge
subcommand shows bridge configuration.
The following fields can be shown:
.sp
.ne 2
.mk
.na
.B BRIDGE
.ad
.sp .6
.RS 4n
The name of the bridge.
.RE

.sp
.ne 2
.mk
.na
.B ADDRESS
.ad
.sp .6
.RS 4n
The Bridge Unique Identifier value (MAC address).
.RE

.sp
.ne 2
.mk
.na
.B PRIORITY
.ad
.sp .6
.RS 4n
Configured priority value; set by
.B -p
with
.B create-bridge
and
.BR modify-bridge .
.RE

.sp
.ne 2
.mk
.na
.B BMAXAGE
.ad
.sp .6
.RS 4n
Configured bridge maximum age; set by
.B -m
with
.B create-bridge
and
.BR modify-bridge .
.RE

.sp
.ne 2
.mk
.na
.B BHELLOTIME
.ad
.sp .6
.RS 4n
Configured bridge hello time; set by
.B -h
with
.B create-bridge
and
.BR modify-bridge .
.RE

.sp
.ne 2
.mk
.na
.B BFWDDELAY
.ad
.sp .6
.RS 4n
Configured forwarding delay; set by
.B -d
with
.B create-bridge
and
.BR modify-bridge .
.RE

.sp
.ne 2
.mk
.na
.B FORCEPROTO
.ad
.sp .6
.RS 4n
Configured forced maximum protocol; set by
.B -f
with
.B create-bridge
and \fBmodify-bridge\fR.
.RE

.sp
.ne 2
.mk
.na
.B TCTIME
.ad
.sp .6
.RS 4n
Time, in seconds, since last topology change.
.RE

.sp
.ne 2
.mk
.na
.B TCCOUNT
.ad
.sp .6
.RS 4n
Count of the number of topology changes.
.RE

.sp
.ne 2
.mk
.na
.B TCHANGE
.ad
.sp .6
.RS 4n
This indicates that a topology change was detected.
.RE

.sp
.ne 2
.mk
.na
.B DESROOT
.ad
.sp .6
.RS 4n
Bridge Identifier of the root node.
.RE

.sp
.ne 2
.mk
.na
.B ROOTCOST
.ad
.sp .6
.RS 4n
Cost of the path to the root node.
.RE

.sp
.ne 2
.mk
.na
.B ROOTPORT
.ad
.sp .6
.RS 4n
Port number used to reach the root node.
.RE

.sp
.ne 2
.mk
.na
.B MAXAGE
.ad
.sp .6
.RS 4n
Maximum age value from the root node.
.RE

.sp
.ne 2
.mk
.na
.B HELLOTIME
.ad
.sp .6
.RS 4n
Hello time value from the root node.
.RE

.sp
.ne 2
.mk
.na
.B FWDDELAY
.ad
.sp .6
.RS 4n
Forward delay value from the root node.
.RE

.sp
.ne 2
.mk
.na
.B HOLDTIME
.ad
.sp .6
.RS 4n
Minimum BPDU interval.
.RE

By default, when the
.B -o
option is not specified, only the
.BR BRIDGE ,
.BR ADDRESS ,
.BR PRIORITY ,
and
.B DESROOT
fields are
shown.
.sp
When the
.B -s
option is specified, the
.B show-bridge
subcommand
shows bridge statistics. The following fields can be shown:
.sp
.ne 2
.mk
.na
.B BRIDGE
.ad
.sp .6
.RS 4n
Bridge name.
.RE

.sp
.ne 2
.mk
.na
.B DROPS
.ad
.sp .6
.RS 4n
Number of packets dropped due to resource problems.
.RE

.sp
.ne 2
.mk
.na
.B FORWARDS
.ad
.sp .6
.RS 4n
Number of packets forwarded from one link to another.
.RE

.sp
.ne 2
.mk
.na
.B MBCAST
.ad
.sp .6
.RS 4n
Number of multicast and broadcast packets handled by the bridge.
.RE

.sp
.ne 2
.mk
.na
.B RECV
.ad
.sp .6
.RS 4n
Number of packets received on all attached links.
.RE

.sp
.ne 2
.mk
.na
.B SENT
.ad
.sp .6
.RS 4n
Number of packets sent on all attached links.
.RE

.sp
.ne 2
.mk
.na
.B UNKNOWN
.ad
.sp .6
.RS 4n
Number of packets handled that have an unknown destination. Such packets
are sent to all links.
.RE

By default, when the
.B -o
option is not specified, only the
.BR BRIDGE ,
.BR DROPS ,
and
.B FORWARDS
fields are shown.
.sp
The
.B show-bridge
subcommand also accepts the following options:
.sp
.ne 2
.mk
.na
.BR -l ,
.B --link
.ad
.sp .6
.RS 4n
Displays link-related status and statistics information for all links
attached to a single bridge instance. By using this option and without the
.B -s
option, the following fields can be displayed for each link:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The link name.
.RE

.sp
.ne 2
.mk
.na
.B INDEX
.ad
.sp .6
.RS 4n
Port (link) index number on the bridge.
.RE

.sp
.ne 2
.mk
.na
.B STATE
.ad
.sp .6
.RS 4n
State of the link. The state can be
.BR disabled ,
.BR discarding ,
.BR learning ,
.BR forwarding ,
.BR non-stp ,
or
.BR bad-mtu .
.RE

.sp
.ne 2
.mk
.na
.B UPTIME
.ad
.sp .6
.RS 4n
Number of seconds since the last reset or initialization.
.RE

.sp
.ne 2
.mk
.na
.B OPERCOST
.ad
.sp .6
.RS 4n
Actual cost in use (1-65535).
.RE

.sp
.ne 2
.mk
.na
.B OPERP2P
.ad
.sp .6
.RS 4n
This indicates whether point-to-point (\fBP2P\fR) mode been detected.
.RE

.sp
.ne 2
.mk
.na
.B OPEREDGE
.ad
.sp .6
.RS 4n
This indicates whether edge mode has been detected.
.RE

.sp
.ne 2
.mk
.na
.B DESROOT
.ad
.sp .6
.RS 4n
The Root Bridge Identifier that has been seen on this port.
.RE

.sp
.ne 2
.mk
.na
.B DESCOST
.ad
.sp .6
.RS 4n
Path cost to the network root node through the designated port.
.RE

.sp
.ne 2
.mk
.na
.B DESBRIDGE
.ad
.sp .6
.RS 4n
Bridge Identifier for this port.
.RE

.sp
.ne 2
.mk
.na
.B DESPORT
.ad
.sp .6
.RS 4n
The ID and priority of the port used to transmit configuration messages for
this port.
.RE

.sp
.ne 2
.mk
.na
.B TCACK
.ad
.sp .6
.RS 4n
This indicates whether Topology Change Acknowledge has been seen.
.RE

When the
.B -l
option is specified without the
.B -o
option, only the
.BR LINK ,
.BR STATE ,
.BR UPTIME ,
and
.B DESROOT
fields are shown.
.sp
When the
.B -l
option is specified, the
.B -s
option can be used to
display the following fields for each link:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
Link name.
.RE

.sp
.ne 2
.mk
.na
.B CFGBPDU
.ad
.sp .6
.RS 4n
Number of configuration BPDUs received.
.RE

.sp
.ne 2
.mk
.na
.B TCNBPDU
.ad
.sp .6
.RS 4n
Number of topology change BPDUs received.
.RE

.sp
.ne 2
.mk
.na
.B RSTPBPDU
.ad
.sp .6
.RS 4n
Number of Rapid Spanning Tree BPDUs received.
.RE

.sp
.ne 2
.mk
.na
.B TXBPDU
.ad
.sp .6
.RS 4n
Number of BPDUs transmitted.
.RE

.sp
.ne 2
.mk
.na
.B DROPS
.ad
.sp .6
.RS 4n
Number of packets dropped due to resource problems.
.RE

.sp
.ne 2
.mk
.na
.B RECV
.ad
.sp .6
.RS 4n
Number of packets received by the bridge.
.RE

.sp
.ne 2
.mk
.na
.B XMIT
.ad
.sp .6
.RS 4n
Number of packets sent by the bridge.
.RE

When the
.B -o
option is not specified, only the
.BR LINK ,
.BR DROPS ,
.BR RECV ,
and
.B XMIT
fields are shown.
.RE

.sp
.ne 2
.mk
.na
.BR -f ,
.B --forwarding
.ad
.sp .6
.RS 4n
Displays forwarding entries for a single bridge instance. With this option,
the following fields can be shown for each forwarding entry:
.sp
.ne 2
.mk
.na
.B DEST
.ad
.sp .6
.RS 4n
Destination MAC address.
.RE

.sp
.ne 2
.mk
.na
.B AGE
.ad
.sp .6
.RS 4n
Age of entry in seconds and milliseconds. Omitted for local entries.
.RE

.sp
.ne 2
.mk
.na
.B FLAGS
.ad
.sp .6
.RS 4n
The
.B L
(local) flag is shown if the MAC address belongs to an attached
link or to a VNIC on one of the attached links.
.RE

.sp
.ne 2
.mk
.na
.B OUTPUT
.ad
.sp .6
.RS 4n
For local entries, this is the name of the attached link that has the MAC
address. Otherwise, for bridges that use Spanning Tree Protocol, this is the
output interface name. For RBridges, this is the output \fBTRILL\fR
nickname.
.RE

When the
.B -o
option is not specified, the
.BR DEST ,
.BR AGE ,
.BR FLAGS ,
and
.B OUTPUT
fields are shown.
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --trill
.ad
.sp .6
.RS 4n
Displays
.B TRILL
nickname entries for a single bridge instance. With
this option, the following fields can be shown for each
.B TRILL
nickname
entry:
.sp
.ne 2
.mk
.na
.B NICK
.ad
.sp .6
.RS 4n
.B TRILL
nickname for this RBridge, which is a number from 1 to 65535.
.RE

.sp
.ne 2
.mk
.na
.B FLAGS
.ad
.sp .6
.RS 4n
The
.B L
flag is shown if the nickname identifies the local system.
.RE

.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
Link name for output when sending messages to this RBridge.
.RE

.sp
.ne 2
.mk
.na
.B NEXTHOP
.ad
.sp .6
.RS 4n
MAC address of the next hop RBridge that is used to reach the RBridge with
this nickname.
.RE

When the
.B -o
option is not specified, the
.BR NICK ,
.BR FLAGS ,
.BR LINK ,
and
.B NEXTHOP
fields are shown.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm create-vlan
[\fB-ft\fR] [\fB-R\fR \fIroot-dir\fR] \fB-l\fR
\fIether-link\fR \fB-v\fR \fIvid\fR [\fIvlan-link\fR]\fR
.ad
.sp .6
.RS 4n
Create a tagged VLAN link with an ID of
.I vid
over Ethernet link
.IR ether-link .
The name of the VLAN link can be specified as
\fIvlan\fR-\fIlink\fR. If the name is not specified, a name will be
automatically generated (assuming that
.I ether-link
is
\fIname\fIPPA\fR) as:
.sp
.in +2
.nf
<\fIname\fR><1000 * \fIvlan-tag\fR + \fIPPA\fR>
.fi
.in -2
.sp

For example, if
.I ether-link
is
.B bge1
and
.I vid
is 2, the name
generated is
.BR bge2001 .
.sp
.ne 2
.mk
.na
.BR -f ,
.B --force
.ad
.sp .6
.RS 4n
Force the creation of the VLAN link. Some devices do not allow frame sizes
large enough to include a VLAN header. When creating a VLAN link over such a
device, the
.B -f
option is needed, and the MTU of the IP interfaces on
the resulting VLAN must be set to 1496 instead of 1500.
.RE

.sp
.ne 2
.mk
.na
.B -l
.I ether-link
.ad
.sp .6
.RS 4n
Specifies Ethernet link over which VLAN is created.
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the VLAN link is temporary. Temporary VLAN links last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-vlan
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I vlan-link
.ad
.sp .6
.RS 4n
Delete the VLAN link specified.
.sp
The \fBdelete-vlan\fRsubcommand accepts the following options:
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletion is temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-vlan
[\fB-P\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]]
[\fIvlan-link\fR]\fR
.ad
.sp .6
.RS 4n
Display VLAN configuration for all VLAN links or for the specified VLAN
link.
.sp
The \fBshow-vlan\fRsubcommand accepts the following options:
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.BR all ,
to display all fields. For each VLAN link, the following fields
can be displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the VLAN link.
.RE

.sp
.ne 2
.mk
.na
.B VID
.ad
.sp .6
.RS 4n
The ID associated with the VLAN.
.RE

.sp
.ne 2
.mk
.na
.B OVER
.ad
.sp .6
.RS 4n
The name of the physical link over which this VLAN is configured.
.RE

.sp
.ne 2
.mk
.na
.B FLAGS
.ad
.sp .6
.RS 4n
A set of flags associated with the VLAN link. Possible flags are:
.sp
.ne 2
.mk
.na
.B f
.ad
.sp .6
.RS 4n
The VLAN was created using the
.B -f
option to
.BR create-vlan .
.RE

.sp
.ne 2
.mk
.na
.B i
.ad
.sp .6
.RS 4n
The VLAN was implicitly created when the DLPI link was opened. These VLAN
links are automatically deleted on last close of the DLPI link (for example,
when the IP interface associated with the VLAN link is unplumbed).
.RE

Additional flags might be defined in the future.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display the persistent VLAN configuration rather than the state of the
running system.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm scan-wifi
[[\fB-p\fR] \fB-o\fR \fIfield\fR[,.\|.\|.]]
[\fIwifi-link\fR]\fR
.ad
.sp .6
.RS 4n
Scans for
.B WiFi
networks, either on all
.B WiFi
links, or just on
the specified
.IR wifi-link .
.sp
By default, currently all fields but
.B BSSTYPE
are displayed.
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.B all
to display all fields. For each
.B WiFi
network found, the
following fields can be displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the link the
.B WiFi
network is on.
.RE

.sp
.ne 2
.mk
.na
.B ESSID
.ad
.sp .6
.RS 4n
The
.B ESSID
(name) of the
.B WiFi
network.
.RE

.sp
.ne 2
.mk
.na
.B BSSID
.ad
.sp .6
.RS 4n
Either the hardware address of the
.B WiFi
network's Access Point (for
.B BSS
networks), or the
.B WiFi
network's randomly generated unique
token (for
.B IBSS
networks).
.RE

.sp
.ne 2
.mk
.na
.B SEC
.ad
.sp .6
.RS 4n
Either
.B none
for a
.B WiFi
.RB "network that uses no security," " wep"
for a
.B WiFi
network that requires WEP (Wired Equivalent Privacy), or
.B wpa
for a WiFi network that requires WPA (Wi-Fi Protected Access).
.RE

.sp
.ne 2
.mk
.na
.B MODE
.ad
.sp .6
.RS 4n
The supported connection modes: one or more of
.BR a ,
.BR b ,
or
.BR g .
.RE

.sp
.ne 2
.mk
.na
.B STRENGTH
.ad
.sp .6
.RS 4n
The strength of the signal: one of
.BR excellent ,
.BR "very good" ,
.BR good ,
.BR weak ,
or
.BR "very weak" .
.RE

.sp
.ne 2
.mk
.na
.B SPEED
.ad
.sp .6
.RS 4n
The maximum speed of the
.B WiFi
network, in megabits per second.
.RE

.sp
.ne 2
.mk
.na
.B BSSTYPE
.ad
.sp .6
.RS 4n
Either
.B bss
for
.B BSS
(infrastructure) networks, or
.B ibss
for
.B IBSS
(ad-hoc) networks.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm connect-wifi
[\fB-e\fR \fIessid\fR] [\fB-i\fR \fIbssid\fR]
[\fB-k\fR \fIkey\fR,.\|.\|.] [\fB-s none\fR | \fBwep\fR | \fBwpa\fR]
[\fB-a open\fR|\fBshared\fR] [\fB-b bss\fR|\fBibss\fR]
[\fB-c\fR] [\fB-m a\fR|\fBb\fR|\fBg\fR] [\fB-T\fR \fItime\fR]
[\fIwifi-link\fR]\fR
.ad
.sp .6
.RS 4n
Connects to a
.B WiFi
network. This consists of four steps:
.IR discovery ,
.IR filtration ,
.IR prioritization ,
and
.IR association .
However, to enable connections to non-broadcast
.B WiFi
networks and to improve performance, if a
.B BSSID
or
.B ESSID
is specified using the
.B -e
or
.B -i
options, then the
first three steps are skipped and
.B connect-wifi
immediately attempts to
associate with a
.B BSSID
or
.B ESSID
that matches the rest of the
provided parameters. If this association fails, but there is a possibility
that other networks matching the specified criteria exist, then the
traditional discovery process begins as specified below.
.sp
The discovery step finds all available
.B WiFi
networks on the specified
WiFi link, which must not yet be connected. For administrative convenience,
if there is only one
.B WiFi
link on the system,
.I wifi-link
can be
omitted.
.sp
Once discovery is complete, the list of networks is filtered according to
the value of the following options:
.sp
.ne 2
.mk
.na
\fB-e\fR \fIessid,\fR \fB--essid\fR=\fIessid\fR
.ad
.sp .6
.RS 4n
Networks that do not have the same
.I essid
are filtered out.
.RE

.sp
.ne 2
.mk
.na
\fB-b bss\fR|\fBibss\fR, \fB--bsstype\fR=\fBbss\fR|\fBibss\fR
.ad
.sp .6
.RS 4n
Networks that do not have the same
.B bsstype
are filtered out.
.RE

.sp
.ne 2
.mk
.na
\fB-m a\fR|\fBb\fR|\fBg\fR,
\fB--mode\fR=\fBa\fR|\fBb\fR|\fBg\fR
.ad
.sp .6
.RS 4n
Networks not appropriate for the specified 802.11 mode are filtered out.
.RE

.sp
.ne 2
.mk
.na
\fB-k\fR \fIkey,.\|.\|.\fR, \fB--key\fR=\fIkey, .\|.\|.\fR
.ad
.sp .6
.RS 4n
Use the specified
.B secobj
named by the key to connect to the network.
Networks not appropriate for the specified keys are filtered out.
.RE

.sp
.ne 2
.mk
.na
\fB-s none\fR|\fBwep\fR|\fBwpa\fR,
\fB--sec\fR=\fBnone\fR|\fBwep\fR|\fBwpa\fR
.ad
.sp .6
.RS 4n
Networks not appropriate for the specified security mode are filtered
out.
.RE

Next, the remaining networks are prioritized, first by signal strength, and
then by maximum speed. Finally, an attempt is made to associate with each
network in the list, in order, until one succeeds or no networks remain.
.sp
In addition to the options described above, the following options also
control the behavior of
.BR connect-wifi :
.sp
.ne 2
.mk
.na
.BR "-a open" |\fBshared\fR,
\fB--auth\fR=\fBopen\fR|\fBshared\fR
.ad
.sp .6
.RS 4n
Connect using the specified authentication mode. By default,
.B open
and
.B shared
are tried in order.
.RE

.sp
.ne 2
.mk
.na
.BR -c ,
.B --create-ibss
.ad
.sp .6
.RS 4n
Used with
.B "-b ibss"
to create a new ad-hoc network if one matching the
specified
.B ESSID
cannot be found. If no
.B ESSID
is specified, then
.B -c -b ibss
always triggers the creation of a new ad-hoc network.
.RE

.sp
.ne 2
.mk
.na
\fB-T\fR \fItime\fR, \fB--timeout\fR=\fItime\fR
.ad
.sp .6
.RS 4n
Specifies the number of seconds to wait for association to succeed. If
.I time
is
.BR forever ,
then the associate will wait indefinitely. The
current default is ten seconds, but this might change in the future.
Timeouts shorter than the default might not succeed reliably.
.RE

.sp
.ne 2
.mk
.na
\fB-k\fR \fIkey,.\|.\|.\fR, \fB--key\fR=\fIkey,.\|.\|.\fR
.ad
.sp .6
.RS 4n
In addition to the filtering previously described, the specified keys will
be used to secure the association. The security mode to use will be based on
the key class; if a security mode was explicitly specified, it must be
compatible with the key class. All keys must be of the same class.
.sp
For security modes that support multiple key slots, the slot to place the
key will be specified by a colon followed by an index. Therefore, \fB-k
mykey:3\fR places \fBmykey\fR in slot 3. By default, slot 1 is assumed. For
security modes that support multiple keys, a comma-separated list can be
specified, with the first key being the active key.
.RE

.RE

.sp
.ne 2
.mk
.na
\fBdladm disconnect-wifi\fR [\fB-a\fR] [\fIwifi-link\fR]\fR
.ad
.sp .6
.RS 4n
Disconnect from one or more
.B WiFi
networks. If \fIwifi-link\fR
specifies a connected
.B WiFi
link, then it is disconnected. For
administrative convenience, if only one
.B WiFi
link is connected,
.I wifi-link
can be omitted.
.sp
.ne 2
.mk
.na
.BR -a ,
.B --all-links
.ad
.sp .6
.RS 4n
Disconnects from all connected links. This is primarily intended for use by
scripts.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-wifi
[[\fB-p\fR] \fB-o\fR \fIfield\fR,.\|.\|.]
[\fIwifi-link\fR]\fR
.ad
.sp .6
.RS 4n
Shows
.B WiFi
configuration information either for all
.B WiFi
links
or for the specified link
.IR wifi-link .
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield,.\|.\|.\fR, \fB--output\fR=\fIfield\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.BR all ,
to display all fields. For each
.B WiFi
link, the following
fields can be displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the link being displayed.
.RE

.sp
.ne 2
.mk
.na
.B STATUS
.ad
.sp .6
.RS 4n
Either
.B connected
if the link is connected, or
.B disconnected
if
it is not connected. If the link is disconnected, all remaining fields have
the value
.BR -- .
.RE

.sp
.ne 2
.mk
.na
.B ESSID
.ad
.sp .6
.RS 4n
The
.B ESSID
(name) of the connected
.B WiFi
network.
.RE

.sp
.ne 2
.mk
.na
.B BSSID
.ad
.sp .6
.RS 4n
Either the hardware address of the
.B WiFi
network's Access Point (for
.B BSS
networks), or the
.B WiFi
network's randomly generated unique
token (for
.B IBSS
networks).
.RE

.sp
.ne 2
.mk
.na
.B SEC
.ad
.sp .6
.RS 4n
Either
.B none
for a
.B WiFi
.RB "network that uses no security," " wep"
for a
.B WiFi
network that requires WEP, or
.B wpa
for a WiFi network
that requires WPA.
.RE

.sp
.ne 2
.mk
.na
.B MODE
.ad
.sp .6
.RS 4n
The supported connection modes: one or more of
.BR a ,
.BR b ,
or
.BR g .
.RE

.sp
.ne 2
.mk
.na
.B STRENGTH
.ad
.sp .6
.RS 4n
The connection strength: one of
.BR excellent ,
.BR "very good" ,
.BR good ,
.BR weak ,
or
.BR "very weak" .
.RE

.sp
.ne 2
.mk
.na
.B SPEED
.ad
.sp .6
.RS 4n
The connection speed, in megabits per second.
.RE

.sp
.ne 2
.mk
.na
.B AUTH
.ad
.sp .6
.RS 4n
Either
.B open
or
.B shared
(see
.BR connect-wifi ).
.RE

.sp
.ne 2
.mk
.na
.B BSSTYPE
.ad
.sp .6
.RS 4n
Either
.B bss
for
.B BSS
(infrastructure) networks, or
.B ibss
for
.B IBSS
(ad-hoc) networks.
.RE

By default, currently all fields but
.BR AUTH ,
.BR BSSID ,
.B BSSTYPE
are displayed.
.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Displays using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-ether
[\fB-x\fR] [[\fB-p\fR] \fB-o\fR \fIfield\fR,.\|.\|.]
[\fIether-link\fR]\fR
.ad
.sp .6
.RS 4n
Shows state information either for all physical Ethernet links or for a
specified physical Ethernet link.
.sp
The
.B show-ether
subcommand accepts the following options:
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR,.\|.\|., \fB--output\fR=\fIfield\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.B all
to display all fields. For each link, the following fields can be
displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the link being displayed.
.RE

.sp
.ne 2
.mk
.na
.B PTYPE
.ad
.sp .6
.RS 4n
Parameter type, where
.B current
indicates the negotiated state of the
link,
.B capable
indicates capabilities supported by the device,
.B adv
indicates the advertised capabilities, and
.B peeradv
indicates
the capabilities advertised by the link-partner.
.RE

.sp
.ne 2
.mk
.na
.B STATE
.ad
.sp .6
.RS 4n
The state of the link.
.RE

.sp
.ne 2
.mk
.na
.B AUTO
.ad
.sp .6
.RS 4n
A \fByes\fR/\fBno\fR value indicating whether auto-negotiation is
advertised.
.RE

.sp
.ne 2
.mk
.na
.B SPEED-DUPLEX
.ad
.sp .6
.RS 4n
Combinations of speed and duplex values available. The units of speed are
encoded with a trailing suffix of
.B G
(Gigabits/s) or
.B M
(Mb/s).
Duplex values are encoded as \fBf\fR (full-duplex) or \fBh\fR
(half-duplex).
.RE

.sp
.ne 2
.mk
.na
.B PAUSE
.ad
.sp .6
.RS 4n
Flow control information. Can be
.BR no ,
indicating no flow control is
available;
.BR tx ,
indicating that the end-point can transmit pause
frames, but ignores any received pause frames;
.BR rx ,
indicating that the
end-point receives and acts upon received pause frames; or
.BR bi ,
indicating bi-directional flow-control.
.RE

.sp
.ne 2
.mk
.na
.B REM_FAULT
.ad
.sp .6
.RS 4n
Fault detection information. Valid values are
.B none
or
.BR fault .
.RE

By default, all fields except
.B REM_FAULT
are displayed for the
"current" \fBPTYPE\fR.
.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Displays using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -x ,
.B --extended
.ad
.sp .6
.RS 4n
Extended output is displayed for
.B PTYPE
values of
.BR current ,
.BR capable ,
.B adv
and
.BR peeradv .
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm set-linkprop
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-p\fR
\fIprop\fR=\fIvalue\fR[,.\|.\|.] \fIlink\fR
.ad
.sp .6
.RS 4n
Sets the values of one or more properties on the link specified. The list
of properties and their possible values depend on the link type, the network
device driver, and networking hardware. These properties can be retrieved
using
.BR show-linkprop .
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the changes are temporary. Temporary changes last until the
next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIprop\fR=\fIvalue\fR[,.\|.\|.], \fB--prop\fR
\fIprop\fR=\fIvalue\fR[,.\|.\|.]\fR
.ad
.br
.na
\fR
.ad
.sp .6
.RS 4n
A comma-separated list of properties to set to the specified values.
.RE

Note that when the persistent value is set, the temporary value changes to
the same value.
.RE

.sp
.ne 2
.mk
.na
.B dladm reset-linkprop
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
[\fB-p\fR \fIprop\fR,.\|.\|.] \fIlink\fR
.ad
.sp .6
.RS 4n
Resets one or more properties to their values on the link specified.
Properties are reset to the values they had at startup. If no properties are
specified, all properties are reset. See
.B show-linkprop
for a
description of properties.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the resets are temporary. Values are reset to default
values. Temporary resets last until the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIprop, .\|.\|.\fR, \fB--prop\fR=\fIprop, .\|.\|.\fR
.ad
.sp .6
.RS 4n
A comma-separated list of properties to reset.
.RE

Note that when the persistent value is reset, the temporary value changes
to the same value.
.RE

.sp
.ne 2
.mk
.na
.B dladm show-linkprop
[\fB-P\fR] [[\fB-c\fR] \fB-o\fR
\fIfield\fR[,.\|.\|.]][\fB-p\fR \fIprop\fR[,.\|.\|.]] [\fIlink\fR]\fR
.ad
.sp .6
.RS 4n
Show the current or persistent values of one or more properties, either for
all datalinks or for the specified link. By default, current values are
shown. If no properties are specified, all available link properties are
displayed. For each property, the following fields are displayed:
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.B all
to display all fields. For each link, the following fields can be
displayed:
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the datalink.
.RE

.sp
.ne 2
.mk
.na
.B PROPERTY
.ad
.sp .6
.RS 4n
The name of the property.
.RE

.sp
.ne 2
.mk
.na
.B PERM
.ad
.sp .6
.RS 4n
The read/write permissions of the property. The value shown is one of
.B ro
or
.BR rw .
.RE

.sp
.ne 2
.mk
.na
.B VALUE
.ad
.sp .6
.RS 4n
The current (or persistent) property value. If the value is not set, it is
shown as
.BR -- .
If it is unknown, the value is shown as
.BR ? .
Persistent values that are not set or have been reset will be shown as
.B --
and will use the system
.B DEFAULT
value (if any).
.RE

.sp
.ne 2
.mk
.na
.B DEFAULT
.ad
.sp .6
.RS 4n
The default value of the property. If the property has no default value,
.B --
is shown.
.RE

.sp
.ne 2
.mk
.na
.B POSSIBLE
.ad
.sp .6
.RS 4n
A comma-separated list of the values the property can have. If the values
span a numeric range,
.I min
-
.I max
might be shown as shorthand. If
the possible values are unknown or unbounded,
.B --
is shown.
.RE

The list of properties depends on the link type and network device driver,
and the available values for a given property further depends on the
underlying network hardware and its state. General link properties are
documented in the
.B "LINK PROPERTIES"
section. However, link properties
that begin with "\fB_\fR" (underbar) are specific to a given link or its
underlying network device and subject to change or removal. See the
appropriate network device driver man page for details.
.RE

.sp
.ne 2
.mk
.na
.BR -c ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with this option. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display persistent link property information
.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIprop, .\|.\|.\fR, \fB--prop\fR=\fIprop, .\|.\|.\fR
.ad
.sp .6
.RS 4n
A comma-separated list of properties to show. See the sections on link
properties following subcommand descriptions.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm create-secobj
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-f\fR
\fIfile\fR] \fB-c\fR \fIclass secobj\fR
.ad
.sp .6
.RS 4n
Create a secure object named
.I secobj
in the specified
.I class
to
be later used as a WEP or WPA key in connecting to an encrypted network. The
value of the secure object can either be provided interactively or read from
a file. The sequence of interactive prompts and the file format depends on
the class of the secure object.
.sp
Currently, the classes
.B wep
and
.B wpa
.RB "are supported. The" " WEP"
(Wired Equivalent Privacy) key can be either 5 or 13 bytes long. It can be
provided either as an
.B ASCII
.RB "or hexadecimal string -- thus," " 12345"
and
.B 0x3132333435
are equivalent 5-byte keys (the
.B 0x
prefix can
be omitted). A file containing a
.B WEP
key must consist of a single line
using either
.B WEP
key format. The WPA (Wi-Fi Protected Access) key must
be provided as an ASCII string with a length between 8 and 63 bytes.
.sp
This subcommand is only usable by users or roles that belong to the
"Network Link Security" \fBRBAC\fR profile.
.sp
.ne 2
.mk
.na
\fB-c\fR \fIclass\fR, \fB--class\fR=\fIclass\fR
.ad
.sp .6
.RS 4n
.I class
can be
.B wep
or
.BR wpa .
See preceding discussion.
.RE

.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the creation is temporary. Temporary creation last until the
next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
.B -f
.IR file ,
\fB--file\fR=\fIfile\fR
.ad
.sp .6
.RS 4n
Specifies a file that should be used to obtain the secure object's value.
The format of this file depends on the secure object class. See the
.B EXAMPLES
section for an example of using this option to set a
.B WEP
key.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-secobj
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.IR secobj [,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
Delete one or more specified secure objects. This subcommand is only usable
by users or roles that belong to the "Network Link Security" \fBRBAC\fR
profile.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletions are temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-secobj
[\fB-P\fR] [[\fB-p\fR] \fB-o\fR
\fIfield\fR[,.\|.\|.]] [\fIsecobj\fR,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
Show current or persistent secure object information. If one or more secure
objects are specified, then information for each is displayed. Otherwise,
all current or persistent secure objects are displayed.
.sp
By default, current secure objects are displayed, which are all secure
objects that have either been persistently created and not temporarily
deleted, or temporarily created.
.sp
For security reasons, it is not possible to show the value of a secure
object.
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.] , \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below. For displayed secure
object, the following fields can be shown:
.sp
.ne 2
.mk
.na
.B OBJECT
.ad
.sp .6
.RS 4n
The name of the secure object.
.RE

.sp
.ne 2
.mk
.na
.B CLASS
.ad
.sp .6
.RS 4n
The class of the secure object.
.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display persistent secure object information
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm create-vnic
[\fB-t\fR] \fB-l\fR \fIlink\fR [\fB-R\fR
\fIroot-dir\fR] [\fB-m\fR \fIvalue\fR | auto | {factory [\fB-n\fR
\fIslot-identifier\fR]} | {random [\fB-r\fR \fIprefix\fR]}] [\fB-v\fR
\fIvlan-id\fR] [\fB-p\fR \fIprop\fR=\fIvalue\fR[,.\|.\|.]] \fIvnic-link\fR
.ad
.sp .6
.RS 4n
Create a VNIC with name
.I vnic-link
over the specified link.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the VNIC is temporary. Temporary VNICs last until the next
reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-l\fR \fIlink\fR, \fB--link\fR=\fIlink\fR
.ad
.sp .6
.RS 4n
.I link
can be a physical link or an
.BR etherstub .
.RE

.sp
.ne 2
.mk
.na
\fB-m\fR \fIvalue\fR | \fIkeyword\fR, \fB--mac-address\fR=\fIvalue\fR |
.I keyword
.ad
.sp .6
.RS 4n
Sets the VNIC's MAC address based on the specified value or keyword. If
.I value
is not a keyword, it is interpreted as a unicast MAC address,
which must be valid for the underlying NIC. The following special keywords
can be used:
.sp
.ne 2
.mk
.na
\fBfactory [\fB-n\fR \fIslot-identifier\fR],\fR
.ad
.br
.na
\fBfactory [\fB--slot\fR=\fIslot-identifier\fR]\fR
.ad
.sp .6
.RS 4n
Assign a factory MAC address to the VNIC. When a factory MAC address is
requested,
.B -m
can be combined with the
.B -n
option to specify a
MAC address slot to be used. If
.B -n
is not specified, the system will
choose the next available factory MAC address. The
.B -m
option of the
.B show-phys
subcommand can be used to display the list of factory MAC
addresses, their slot identifiers, and their availability.
.RE

.sp
.ne 2
.mk
.na
\fR
.ad
.br
.na
\fBrandom [-r\fR \fIprefix\fR],\fR
.ad
.br
.na
\fBrandom [--mac-prefix\fR=\fIprefix\fR]\fR
.ad
.sp .6
.RS 4n
Assign a random MAC address to the VNIC. A default prefix consisting of a
valid IEEE OUI with the local bit set will be used. That prefix can be
overridden with the
.B -r
option.
.RE

.sp
.ne 2
.mk
.na
.B auto
.ad
.sp .6
.RS 4n
Try and use a factory MAC address first. If none is available, assign a
random MAC address.
.B auto
is the default action if the
.B -m
option
is not specified.
.RE

.sp
.ne 2
.mk
.na
.B -v
.I vlan-id
.ad
.sp .6
.RS 4n
Enable VLAN tagging for this VNIC. The VLAN tag will have id
.IR vlan-id .
.RE

.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIprop\fR=\fIvalue\fR,.\|.\|., \fB--prop\fR
\fIprop\fR=\fIvalue\fR,.\|.\|.\fR
.ad
.sp .6
.RS 4n
A comma-separated list of properties to set to the specified values.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-vnic
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I vnic-link
.ad
.sp .6
.RS 4n
Deletes the specified VNIC.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletion is temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-vnic
[\fB-pP\fR] [\fB-s\fR [\fB-i\fR \fIinterval\fR]]
[\fB-o\fR \fIfield\fR[,.\|.\|.]] [\fB-l\fR \fIlink\fR] [\fIvnic-link\fR]\fR
.ad
.sp .6
.RS 4n
Show VNIC configuration information (the default) or statistics, for all
VNICs, all VNICs on a link, or only the specified
.IR vnic-link .
.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.] , \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below. The field name must be
one of the fields listed below, or the special value
.B all
to display
all fields. By default (without
.BR -o ),
.B show-vnic
displays all
fields.
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the VNIC.
.RE

.sp
.ne 2
.mk
.na
.B OVER
.ad
.sp .6
.RS 4n
The name of the physical link over which this VNIC is configured.
.RE

.sp
.ne 2
.mk
.na
.B SPEED
.ad
.sp .6
.RS 4n
The maximum speed of the VNIC, in megabits per second.
.RE

.sp
.ne 2
.mk
.na
.B MACADDRESS
.ad
.sp .6
.RS 4n
MAC address of the VNIC.
.RE

.sp
.ne 2
.mk
.na
.B MACADDRTYPE
.ad
.sp .6
.RS 4n
MAC address type of the VNIC.
.B dladm
distinguishes among the following
MAC address types:
.sp
.ne 2
.mk
.na
.B random
.ad
.sp .6
.RS 4n
A random address assigned to the VNIC.
.RE

.sp
.ne 2
.mk
.na
.B factory
.ad
.sp .6
.RS 4n
A factory MAC address used by the VNIC.
.RE

.RE

.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The
.B -o
option is
required with \fB-p\fR. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display the persistent VNIC configuration.
.RE

.sp
.ne 2
.mk
.na
.BR -s ,
.B --statistics
.ad
.sp .6
.RS 4n
Displays VNIC statistics.
.RE

.sp
.ne 2
.mk
.na
\fB-i\fR \fIinterval\fR, \fB--interval\fR=\fIinterval\fR
.ad
.sp .6
.RS 4n
Used with the
.B -s
option to specify an interval, in seconds, at which
statistics should be displayed. If this option is not specified, statistics
will be displayed only once.
.RE

.sp
.ne 2
.mk
.na
\fB-l\fR \fIlink\fR, \fB--link\fR=\fIlink\fR
.ad
.sp .6
.RS 4n
Display information for all VNICs on the named link.
.RE

.RE

.sp
.ne 2
.mk
.na
\fR
.ad
.br
.na
.B dladm create-etherstub
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I etherstub
.ad
.sp .6
.RS 4n
Create an etherstub with the specified name.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the etherstub is temporary. Temporary etherstubs do not
persist across reboots.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

VNICs can be created on top of etherstubs instead of physical NICs. As with
physical NICs, such a creation causes the stack to implicitly create a
virtual switch between the VNICs created on top of the same etherstub.
.RE

.sp
.ne 2
.mk
.na
\fR
.ad
.br
.na
.B dladm delete-etherstub
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I etherstub
.ad
.sp .6
.RS 4n
Delete the specified etherstub.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletion is temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
\fBdladm show-etherstub\fR [\fIetherstub\fR]\fR
.ad
.sp .6
.RS 4n
Show all configured etherstubs by default, or the specified etherstub if
.I etherstub
is specified.
.RE

.sp
.ne 2
.mk
.na
.B dladm create-iptun
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] \fB-T\fR
.I type
[\fB-s\fR \fItsrc\fR] [\fB-d\fR \fItdst\fR] \fIiptun-link\fR
.ad
.sp .6
.RS 4n
Create an IP tunnel link named
.IR iptun-link .
Such links can
additionally be protected with IPsec using \fBipsecconf\fR(1M).
.sp
An IP tunnel is conceptually comprised of two parts: a virtual link between
two or more IP nodes, and an IP interface above this link that allows the
system to transmit and receive IP packets encapsulated by the underlying
link. This subcommand creates a virtual link. The \fBifconfig\fR(1M) command
is used to configure IP interfaces above the link.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the IP tunnel link is temporary. Temporary tunnels last
until the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-T\fR \fItype\fR, \fB--tunnel-type\fR=\fItype\fR
.ad
.sp .6
.RS 4n
Specifies the type of tunnel to be created. The type must be one of the
following:
.sp
.ne 2
.mk
.na
.B ipv4
.ad
.sp .6
.RS 4n
A point-to-point, IP-over-IP tunnel between two IPv4 nodes. This type of
tunnel requires IPv4 source and destination addresses to function. IPv4 and
IPv6 interfaces can be plumbed above such a tunnel to create IPv4-over-IPv4
and IPv6-over-IPv4 tunneling configurations.
.RE

.sp
.ne 2
.mk
.na
.B ipv6
.ad
.sp .6
.RS 4n
A point-to-point, IP-over-IP tunnel between two IPv6 nodes as defined in
IETF RFC 2473. This type of tunnel requires IPv6 source and destination
addresses to function. IPv4 and IPv6 interfaces can be plumbed above such a
tunnel to create IPv4-over-IPv6 and IPv6-over-IPv6 tunneling
configurations.
.RE

.sp
.ne 2
.mk
.na
.B 6to4
.ad
.sp .6
.RS 4n
A 6to4, point-to-multipoint tunnel as defined in IETF RFC 3056. This type
of tunnel requires an IPv4 source address to function. An IPv6 interface is
plumbed on such a tunnel link to configure a 6to4 router.
.RE

.RE

.sp
.ne 2
.mk
.na
\fB-s\fR \fItsrc\fR, \fB--tunnel-src\fR=\fItsrc\fR
.ad
.sp .6
.RS 4n
Literal IP address or hostname corresponding to the tunnel source. If a
hostname is specified, it will be resolved to IP addresses, and one of those
IP addresses will be used as the tunnel source. Because IP tunnels are
created before naming services have been brought online during the boot
process, it is important that any hostname used be included in
.BR /etc/hosts .
.RE

.sp
.ne 2
.mk
.na
\fB-d\fR \fItdst\fR, \fB--tunnel-dst\fR=\fItdst\fR
.ad
.sp .6
.RS 4n
Literal IP address or hostname corresponding to the tunnel destination.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm modify-iptun
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR] [\fB-s\fR
\fItsrc\fR] [\fB-d\fR \fItdst\fR] \fIiptun-link\fR
.ad
.sp .6
.RS 4n
Modify the parameters of the specified IP tunnel.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the modification is temporary. Temporary modifications last
until the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.sp
.ne 2
.mk
.na
\fB-s\fR \fItsrc\fR, \fB--tunnel-src\fR=\fItsrc\fR
.ad
.sp .6
.RS 4n
Specifies a new tunnel source address. See
.B create-iptun
for a
description.
.RE

.sp
.ne 2
.mk
.na
\fB-d\fR \fItdst\fR, \fB--tunnel-dst\fR=\fItdst\fR
.ad
.sp .6
.RS 4n
Specifies a new tunnel destination address. See
.B create-iptun
for a
description.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm delete-iptun
[\fB-t\fR] [\fB-R\fR \fIroot-dir\fR]
.I iptun-link
.ad
.sp .6
.RS 4n
Delete the specified IP tunnel link.
.sp
.ne 2
.mk
.na
.BR -t ,
.B --temporary
.ad
.sp .6
.RS 4n
Specifies that the deletion is temporary. Temporary deletions last until
the next reboot.
.RE

.sp
.ne 2
.mk
.na
\fB-R\fR \fIroot-dir\fR, \fB--root-dir\fR=\fIroot-dir\fR
.ad
.sp .6
.RS 4n
See "Options," above.
.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-iptun
[\fB-P\fR] [[\fB-p\fR] \fB-o\fR
\fIfield\fR[,.\|.\|.]] [\fIiptun-link\fR]\fR
.ad
.sp .6
.RS 4n
Show IP tunnel link configuration for a single IP tunnel or all IP
tunnels.
.sp
.ne 2
.mk
.na
.BR -P ,
.B --persistent
.ad
.sp .6
.RS 4n
Display the persistent IP tunnel configuration.
.RE

.sp
.ne 2
.mk
.na
.BR -p ,
.B --parseable
.ad
.sp .6
.RS 4n
Display using a stable machine-parseable format. The -o option is required
with -p. See "Parseable Output Format", below.
.RE

.sp
.ne 2
.mk
.na
\fB-o\fR \fIfield\fR[,.\|.\|.], \fB--output\fR=\fIfield\fR[,.\|.\|.]\fR
.ad
.sp .6
.RS 4n
A case-insensitive, comma-separated list of output fields to display. The
field name must be one of the fields listed below, or the special value
.BR all ,
to display all fields. By default (without
.BR -o ),
.B show-iptun
displays all fields.
.sp
.ne 2
.mk
.na
.B LINK
.ad
.sp .6
.RS 4n
The name of the IP tunnel link.
.RE

.sp
.ne 2
.mk
.na
.B TYPE
.ad
.sp .6
.RS 4n
Type of tunnel as specified by the
.B -T
option of
.BR create-iptun .
.RE

.sp
.ne 2
.mk
.na
.B FLAGS
.ad
.sp .6
.RS 4n
A set of flags associated with the IP tunnel link. Possible flags are:
.sp
.ne 2
.mk
.na
.B s
.ad
.sp .6
.RS 4n
The IP tunnel link is protected by IPsec policy. To display the IPsec
policy associated with the tunnel link, enter:
.sp
.in +2
.nf
# \fBipsecconf -ln -i \fItunnel-link\fR
.fi
.in -2
.sp

See \fBipsecconf\fR(1M) for more details on how to configure IPsec
policy.
.RE

.sp
.ne 2
.mk
.na
.B i
.ad
.sp .6
.RS 4n
The IP tunnel link was implicitly created with \fBifconfig\fR(1M), and will
be automatically deleted when it is no longer referenced (that is, when the
last IP interface over the tunnel is unplumbed). See \fBifconfig\fR(1M) for
details on implicit tunnel creation.
.RE

.RE

.sp
.ne 2
.mk
.na
.B SOURCE
.ad
.sp .6
.RS 4n
The tunnel source address.
.RE

.sp
.ne 2
.mk
.na
.B DESTINATION
.ad
.sp .6
.RS 4n
The tunnel destination address.
.RE

.RE

.RE

.sp
.ne 2
.mk
.na
.B dladm show-usage
[\fB-a\fR] \fB-f\fR \fIfilename\fR [\fB-p\fR
.I plotfile
.B -F
\fIformat\fR] [\fB-s\fR \fItime\fR] [\fB-e\fR
\fItime\fR] [\fIlink\fR]\fR
.ad
.sp .6
.RS 4n
Show the historical network usage from a stored extended accounting file.
Configuration and enabling of network accounting through
.BR acctadm (1M)
is required. The default output will be the summary of network usage for the
entire period of time in which extended accounting was enabled.
.sp
.ne 2
.mk
.na
.B -a
.ad
.sp .6
.RS 4n
Display all historical network usage for the specified period of time
during which extended accounting is enabled. This includes the usage
information for the links that have already been deleted.
.RE

.sp
.ne 2
.mk
.na
.B -f
.IR filename ,
\fB--file\fR=\fIfilename\fR
.ad
.sp .6
.RS 4n
Read extended accounting records of network usage from
.IR filename .
.RE

.sp
.ne 2
.mk
.na
.B -F
.IR format ,
\fB--format\fR=\fIformat\fR
.ad
.sp .6
.RS 4n
Specifies the format of \fIplotfile\fR that is specified by the \fB-p\fR
option. As of this release,
.B gnuplot
is the only supported format.
.RE

.sp
.ne 2
.mk
.na
\fB-p\fR \fIplotfile\fR, \fB--plot\fR=\fIplotfile\fR
.ad
.sp .6
.RS 4n
Write network usage data to a file of the format specified by the
.BR -F
option, which is required.
.RE

.sp
.ne 2
.mk
.na
\fB-s\fR \fItime\fR, \fB--start\fR=\fItime\fR
.ad
.br
.na
\fB-e\fR \fItime\fR, \fB--stop\fR=\fItime\fR
.ad
.sp .6
.RS 4n
Start and stop times for data display. Time is in the format
\fIMM\fR/\fIDD\fR/\fIYYYY\fR,\fIhh\fR:\fImm\fR:\fIss\fR.
.RE

.sp
.ne 2
.mk
.na
.I link
.ad
.sp .6
.RS 4n
If specified, display the network usage only for the named link. Otherwise,
display network usage for all links.
.RE

.RE

.SS "Parseable Output Format"
.sp
.LP
Many
.B dladm
subcommands have an option that displays output in a
machine-parseable format. The output format is one or more lines of colon
(\fB:\fR) delimited fields. The fields displayed are specific to the
subcommand used and are listed under the entry for the
.B -o
option for a
given subcommand. Output includes only those fields requested by means of
the
.B -o
option, in the order requested.
.sp
.LP
When you request multiple fields, any literal colon characters are escaped
by a backslash (\fB\e\fR) before being output. Similarly, literal backslash
characters will also be escaped (\fB\e\e\fR). This escape format is
parseable by using shell
.BR read (1)
functions with the environment
variable
.B IFS=:
(see
.BR EXAMPLES ,
below). Note that escaping is not
done when you request only a single field.
.SS "General Link Properties"
.sp
.LP
The following general link properties are supported:
.sp
.ne 2
.mk
.na
.B autopush
.ad
.sp .6
.RS 4n
Specifies the set of STREAMS modules to push on the stream associated with
a link when its DLPI device is opened. It is a space-delimited list of
modules.
.sp
The optional special character sequence
.B [anchor]
indicates that a
STREAMS anchor should be placed on the stream at the module previously
specified in the list. It is an error to specify more than one anchor or to
have an anchor first in the list.
.sp
The
.B autopush
property is preferred over the more general
.BR autopush (1M)
command.
.RE

.sp
.ne 2
.mk
.na
.B cpus
.ad
.sp .6
.RS 4n
Bind the processing of packets for a given data link to a processor or a
set of processors. The value can be a comma-separated list of one or more
processor ids. If the list consists of more than one processor, the
processing will spread out to all the processors. Connection to processor
affinity and packet ordering for any individual connection will be
maintained.
.sp
The processor or set of processors are not exclusively reserved for the
link. Only the kernel threads and interrupts associated with processing of
the link are bound to the processor or the set of processors specified. In
case it is desired that processors be dedicated to the link,
.BR psrset (1M)
can be used to create a processor set and then specifying
the processors from the processor set to bind the link to.
.sp
If the link was already bound to processor or set of processors due to a
previous operation, the binding will be removed and the new set of
processors will be used instead.
.sp
The default is no CPU binding, which is to say that the processing of
packets is not bound to any specific processor or processor set.
.RE

.sp
.ne 2
.mk
.na
.B learn_limit
.ad
.sp .6
.RS 4n
Limits the number of new or changed MAC sources to be learned over a bridge
link. When the number exceeds this value, learning on that link is
temporarily disabled. Only non-VLAN, non-VNIC type links have this
property.
.sp
The default value is
.BR 1000 .
Valid values are greater or equal to 0.
.RE

.sp
.ne 2
.mk
.na
.B learn_decay
.ad
.sp .6
.RS 4n
Specifies the decay rate for source changes limited by
.BR learn_limit .
This number is subtracted from the counter for a bridge link every 5
seconds. Only non-VLAN, non-VNIC type links have this property.
.sp
The default value is
.BR 200 .
Valid values are greater or equal to 0.
.RE

.sp
.ne 2
.mk
.na
.B maxbw
.ad
.sp .6
.RS 4n
Sets the full duplex bandwidth for the link. The bandwidth is specified as
an integer with one of the scale suffixes (\fBK\fR,
.BR M ,
or
.B G
for
Kbps, Mbps, and Gbps). If no units are specified, the input value will be
read as Mbps. The default is no bandwidth limit.
.RE

.sp
.ne 2
.mk
.na
.B priority
.ad
.sp .6
.RS 4n
Sets the relative priority for the link. The value can be given as one of
the tokens
.BR high ,
.BR medium ,
or
.BR low .
The default is
.BR high .
.RE

.sp
.ne 2
.mk
.na
.B stp
.ad
.sp .6
.RS 4n
Enables or disables Spanning Tree Protocol on a bridge link. Setting this
value to
.B 0
disables Spanning Tree, and puts the link into forwarding
mode with BPDU guarding enabled. This mode is appropriate for point-to-point
links connected only to end nodes. Only non-VLAN, non-VNIC type links have
this property. The default value is
.BR 1 ,
to enable STP.
.RE

.sp
.ne 2
.mk
.na
.B forward
.ad
.sp .6
.RS 4n
Enables or disables forwarding for a VLAN. Setting this value to \fB0\fR
disables bridge forwarding for a VLAN link. Disabling bridge forwarding
removes that VLAN from the "allowed set" for the bridge. The default value
is
.BR 1 ,
to enable bridge forwarding for configured VLANs.
.RE

.sp
.ne 2
.mk
.na
.B default_tag
.ad
.sp .6
.RS 4n
Sets the default VLAN ID that is assumed for untagged packets sent to and
received from this link. Only non-VLAN, non-VNIC type links have this
property. Setting this value to
.B 0
disables the bridge forwarding of
untagged packets to and from the port. The default value is
.BR "VLAN ID 1" .
Valid values values are from 0 to 4094.
.RE

.sp
.ne 2
.mk
.na
.B stp_priority
.ad
.sp .6
.RS 4n
Sets the STP and RSTP Port Priority value, which is used to determine the
preferred root port on a bridge. Lower numerical values are higher priority.
The default value is
.BR 128 .
Valid values range from 0 to 255.
.RE

.sp
.ne 2
.mk
.na
.B stp_cost
.ad
.sp .6
.RS 4n
Sets the STP and RSTP cost for using the link. The default value is
.BR auto ,
which sets the cost based on link speed, using
.B 100
for
10Mbps,
.B 19
for 100Mbps,
.B 4
for 1Gbps, and
.B 2
for 10Gbps.
Valid values range from 1 to 65535.
.RE

.sp
.ne 2
.mk
.na
.B stp_edge
.ad
.sp .6
.RS 4n
Enables or disables bridge edge port detection. If set to
.B 0
(false),
the system assumes that the port is connected to other bridges even if no
bridge PDUs of any type are seen. The default value is
.BR 1 ,
which
detects edge ports automatically.
.RE

.sp
.ne 2
.mk
.na
.B stp_p2p
.ad
.sp .6
.RS 4n
Sets bridge point-to-point operation mode. Possible values are
.BR true ,
.BR false ,
and
.BR auto .
When set to
.BR auto ,
point-to-point
connections are automatically discovered. When set to
.BR true ,
the port
mode is forced to use point-to-point. When set to
.BR false ,
the port mode
is forced to use normal multipoint mode. The default value is
.BR auto .
.RE

.sp
.ne 2
.mk
.na
.B stp_mcheck
.ad
.sp .6
.RS 4n
Triggers the system to run the RSTP
.BR "Force BPDU Migration Check"
procedure on this link. The procedure is triggered by setting the property
value to
.BR 1 .
The property is automatically reset back to
.BR 0 .
This
value cannot be set unless the following are true:
.RS +4
.TP
.ie t \(bu
.el o
The link is bridged
.RE
.RS +4
.TP
.ie t \(bu
.el o
The bridge is protected by Spanning Tree
.RE
.RS +4
.TP
.ie t \(bu
.el o
The bridge
.B force-protocol
value is at least 2 (RSTP)
.RE
The default value is 0.
.RE

.sp
.ne 2
.mk
.na
.B zone
.ad
.sp .6
.RS 4n
Specifies the zone to which the link belongs. This property can be modified
only temporarily through
.BR dladm ,
and thus the
.B -t
option must be
specified. To modify the zone assignment such that it persists across
reboots, please use \fBzonecfg\fR(1M). Possible values consist of any
exclusive-IP zone currently running on the system. By default, the zone
binding is as per \fBzonecfg\fR(1M).
.RE

.SS "Wifi Link Properties"
.sp
.LP
The following
.B WiFi
link properties are supported. Note that the
ability to set a given property to a given value depends on the driver and
hardware.
.sp
.ne 2
.mk
.na
.B channel
.ad
.sp .6
.RS 4n
Specifies the channel to use. This property can be modified only by certain
.B WiFi
links when in
.B IBSS
mode. The default value and allowed
range of values varies by regulatory domain.
.RE

.sp
.ne 2
.mk
.na
.B powermode
.ad
.sp .6
.RS 4n
Specifies the power management mode of the
.B WiFi
link. Possible values
are
.B off
(disable power management),
.B max
(maximum power savings),
and
.B fast
(performance-sensitive power management). Default is
.BR off .
.RE

.sp
.ne 2
.mk
.na
.B radio
.ad
.sp .6
.RS 4n
Specifies the radio mode of the
.B WiFi
link. Possible values are
.B on
or
.BR off .
Default is
.BR on .
.RE

.sp
.ne 2
.mk
.na
.B speed
.ad
.sp .6
.RS 4n
Specifies a fixed speed for the
.B WiFi
link, in megabits per second.
The set of possible values depends on the driver and hardware (but is shown
by
.BR show-linkprop );
common speeds include 1, 2, 11, and 54. By default,
there is no fixed speed.
.RE

.SS "Ethernet Link Properties"
.sp
.LP
The following MII Properties, as documented in
.BR ieee802.3 (5),
are
supported in read-only mode:
.RS +4
.TP
.ie t \(bu
.el o
.B duplex
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B state
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_autoneg_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_10gfdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_1000fdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_1000hdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_100fdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_100hdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_10fdx_cap
.RE
.RS +4
.TP
.ie t \(bu
.el o
.B adv_10hdx_cap
.RE
.sp
.LP
Each
.B adv_
property (for example,
.BR adv_10fdx_cap )
also has a
read/write counterpart
.B en_
property (for example,
.BR en_10fdx_cap )
controlling parameters used at auto-negotiation. In the absence of Power
Management, the
.BR adv *
speed/duplex parameters provide the values that
are both negotiated and currently effective in hardware. However, with Power
Management enabled, the speed/duplex capabilities currently exposed in
hardware might be a subset of the set of bits that were used in initial link
parameter negotiation. Thus the MII
.BR adv_ *
parameters are marked
read-only, with an additional set of
.BR en_ *
parameters for configuring
speed and duplex properties at initial negotiation.
.sp
.LP
Note that the
.B adv_autoneg_cap
does not have an
.BR en_autoneg_cap
counterpart: the
.B adv_autoneg_cap
is a 0/1 switch that turns off/on
autonegotiation itself, and therefore cannot be impacted by Power
Management.
.sp
.LP
In addition, the following Ethernet properties are reported:
.sp
.ne 2
.mk
.na
.B speed
.ad
.sp .6
.RS 4n
(read-only) The operating speed of the device, in Mbps.
.RE

.sp
.ne 2
.mk
.na
.B mtu
.ad
.sp .6
.RS 4n
The maximum client SDU (Send Data Unit) supported by the device. Valid
range is 68-65536.
.RE

.sp
.ne 2
.mk
.na
.B flowctrl
.ad
.sp .6
.RS 4n
Establishes flow-control modes that will be advertised by the device. Valid
input is one of:
.sp
.ne 2
.mk
.na
.B no
.ad
.sp .6
.RS 4n
No flow control enabled.
.RE

.sp
.ne 2
.mk
.na
.B rx
.ad
.sp .6
.RS 4n
Receive, and act upon incoming pause frames.
.RE

.sp
.ne 2
.mk
.na
.B tx
.ad
.sp .6
.RS 4n
Transmit pause frames to the peer when congestion occurs, but ignore
received pause frames.
.RE

.sp
.ne 2
.mk
.na
.B bi
.ad
.sp .6
.RS 4n
Bidirectional flow control.
.RE

Note that the actual settings for this value are constrained by the
capabilities allowed by the device and the link partner.
.RE

.sp
.ne 2
.mk
.na
.B tagmode
.ad
.sp .6
.RS 4n
This link property controls the conditions in which 802.1Q VLAN tags will
be inserted in packets being transmitted on the link. Two mode values can be
assigned to this property:
.sp
.ne 2
.mk
.na
.B normal
.ad
.RS 12n
.rt
Insert a VLAN tag in outgoing packets under the following conditions:
.RS +4
.TP
.ie t \(bu
.el o
The packet belongs to a VLAN.
.RE
.RS +4
.TP
.ie t \(bu
.el o
The user requested priority tagging.
.RE
.RE

.sp
.ne 2
.mk
.na
.B vlanonly
.ad
.RS 12n
.rt
Insert a VLAN tag only when the outgoing packet belongs to a VLAN. If a tag
is being inserted in this mode and the user has also requested a non-zero
priority, the priority is honored and included in the VLAN tag.
.RE

The default value is
.BR vlanonly .
.RE

.SS "IP Tunnel Link Properties"
.sp
.LP
The following IP tunnel link properties are supported.
.sp
.ne 2
.mk
.na
.B hoplimit
.ad
.sp .6
.RS 4n
Specifies the IPv4 TTL or IPv6 hop limit for the encapsulating outer IP
header of a tunnel link. This property exists for all tunnel types. The
default value is 64.
.RE

.sp
.ne 2
.mk
.na
.B encaplimit
.ad
.sp .6
.RS 4n
Specifies the IPv6 encapsulation limit for an IPv6 tunnel as defined in RFC
2473. This value is the tunnel nesting limit for a given tunneled packet.
The default value is 4. A value of 0 disables the encapsulation limit.
.RE

.SH EXAMPLES
.LP
.B Example 1
Configuring an Aggregation
.sp
.LP
To configure a data-link over an aggregation of devices
.B bge0
and
.B bge1
with key 1, enter the following command:

.sp
.in +2
.nf
# \fBdladm create-aggr -d bge0 -d bge1 1\fR
.fi
.in -2
.sp

.LP
.B Example 2
Connecting to a WiFi Link
.sp
.LP
To connect to the most optimal available unsecured network on a system with
a single
.B WiFi
link (as per the prioritization rules specified for
.BR connect-wifi ),
enter the following command:

.sp
.in +2
.nf
# \fBdladm connect-wifi\fR
.fi
.in -2
.sp

.LP
.B Example 3
Creating a WiFi Key
.sp
.LP
To interactively create the
.B WEP
key
.BR mykey ,
enter the following
command:

.sp
.in +2
.nf
# \fBdladm create-secobj -c wep mykey\fR
.fi
.in -2
.sp

.sp
.LP
Alternatively, to non-interactively create the
.B WEP
key
.BR mykey
using the contents of a file:

.sp
.in +2
.nf
# \fBumask 077\fR
 # \fBcat >/tmp/mykey.$$ <<EOF\fR
 \fB12345\fR
 \fBEOF\fR
 # \fBdladm create-secobj -c wep -f /tmp/mykey.$$ mykey\fR
 # \fBrm /tmp/mykey.$$\fR
.fi
.in -2
.sp

.LP
.B Example 4
Connecting to a Specified Encrypted WiFi Link
.sp
.LP
To use key
.B mykey
to connect to
.B "ESSID wlan"
on link
.BR ath0 ,
enter the following command:

.sp
.in +2
.nf
# \fBdladm connect-wifi -k mykey -e wlan ath0\fR
.fi
.in -2
.sp

.LP
.B Example 5
Changing a Link Property
.sp
.LP
To set
.B powermode
to the value
.B fast
on link
.BR pcwl0 ,
enter
the following command:

.sp
.in +2
.nf
# \fBdladm set-linkprop -p powermode=fast pcwl0\fR
.fi
.in -2
.sp

.LP
.B Example 6
Connecting to a WPA-Protected WiFi Link
.sp
.LP
Create a WPA key
.B psk
and enter the following command:

.sp
.in +2
.nf
# \fBdladm create-secobj -c wpa psk\fR
.fi
.in -2
.sp

.sp
.LP
To then use key
.B psk
to connect to ESSID
.B wlan
on link
.BR ath0 ,
enter the following command:

.sp
.in +2
.nf
# \fBdladm connect-wifi -k psk -e wlan ath0\fR
.fi
.in -2
.sp

.LP
.B Example 7
Renaming a Link
.sp
.LP
To rename the
.B bge0
link to
.BR mgmt0 ,
enter the following
command:

.sp
.in +2
.nf
# \fBdladm rename-link bge0 mgmt0\fR
.fi
.in -2
.sp

.LP
.B Example 8
Replacing a Network Card
.sp
.LP
Consider that the
.B bge0
device, whose link was named
.B mgmt0
as
shown in the previous example, needs to be replaced with a
.B ce0
device
because of a hardware failure. The
.B bge0
NIC is physically removed, and
replaced with a new
.B ce0
.RB "NIC. To associate the newly added" " ce0"
device with the
.B mgmt0
configuration previously associated with
.BR bge0 ,
enter the following command:

.sp
.in +2
.nf
# \fBdladm rename-link ce0 mgmt0\fR
.fi
.in -2
.sp

.LP
.B Example 9
Removing a Network Card
.sp
.LP
Suppose that in the previous example, the intent is not to replace the
.B bge0
NIC with another NIC, but rather to remove and not replace the
hardware. In that case, the
.B mgmt0
datalink configuration is not slated
to be associated with a different physical device as shown in the previous
example, but needs to be deleted. Enter the following command to delete the
datalink configuration associated with the
.B mgmt0
datalink, whose
physical hardware (\fBbge0\fR in this case) has been removed:

.sp
.in +2
.nf
# \fBdladm delete-phys mgmt0\fR
.fi
.in -2
.sp

.LP
.B Example 10
Using Parseable Output to Capture a Single Field
.sp
.LP
The following assignment saves the MTU of link
.B net0
to a variable
named
.BR mtu .

.sp
.in +2
.nf
# \fBmtu=`dladm show-link -p -o mtu net0`\fR
.fi
.in -2
.sp

.LP
.B Example 11
Using Parseable Output to Iterate over Links
.sp
.LP
The following script displays the state of each link on the system.

.sp
.in +2
.nf
# \fBdladm show-link -p -o link,state | while IFS=: read link state; do
            print "Link $link is in state $state"
        done\fR
.fi
.in -2
.sp

.LP
.B Example 12
Configuring VNICs
.sp
.LP
Create two VNICs with names
.B hello0
and
.B test1
over a single
physical link
.BR bge0 :

.sp
.in +2
.nf
# \fBdladm create-vnic -l bge0 hello0\fR
# \fBdladm create-vnic -l bge0 test1\fR
.fi
.in -2
.sp

.LP
.B Example 13
Configuring VNICs and Allocating Bandwidth and Priority
.sp
.LP
Create two VNICs with names
.B hello0
and
.B test1
over a single
physical link
.B bge0
and make
.B hello0
a high priority VNIC with a
factory-assigned MAC address with a maximum bandwidth of 50 Mbps. Make
.B test1
a low priority VNIC with a random MAC address and a maximum
bandwidth of 100Mbps.

.sp
.in +2
.nf
# \fBdladm create-vnic -l bge0 -m factory -p maxbw=50,priority=high hello0\fR
# \fBdladm create-vnic -l bge0 -m random -p maxbw=100M,priority=low test1\fR
.fi
.in -2
.sp

.LP
.B Example 14
Configuring a VNIC with a Factory MAC Address
.sp
.LP
First, list the available factory MAC addresses and choose one of them:

.sp
.in +2
.nf
# \fBdladm show-phys -m bge0\fR
LINK            SLOT         ADDRESS              INUSE    CLIENT
bge0            primary      0:e0:81:27:d4:47     yes      bge0
bge0            1            8:0:20:fe:4e:a5      no
bge0            2            8:0:20:fe:4e:a6      no
bge0            3            8:0:20:fe:4e:a7      no
.fi
.in -2
.sp

.sp
.LP
Create a VNIC named
.B hello0
and use slot 1's address:

.sp
.in +2
.nf
# \fBdladm create-vnic -l bge0 -m factory -n 1 hello0\fR
# \fBdladm show-phys -m bge0\fR
LINK            SLOT         ADDRESS              INUSE    CLIENT
bge0            primary      0:e0:81:27:d4:47     yes      bge0
bge0            1            8:0:20:fe:4e:a5      yes      hello0
bge0            2            8:0:20:fe:4e:a6      no
bge0            3            8:0:20:fe:4e:a7      no
.fi
.in -2
.sp

.LP
.B Example 15
Creating a VNIC with User-Specified MAC Address, Binding
it to Set of Processors
.sp
.LP
Create a VNIC with name
.BR hello0 ,
with a user specified MAC address,
and a processor binding
.BR "0, 1, 2, 3" .

.sp
.in +2
.nf
# \fBdladm create-vnic -l bge0 -m 8:0:20:fe:4e:b8 -p cpus=0,1,2,3 hello0\fR
.fi
.in -2
.sp

.LP
.B Example 16
Creating a Virtual Network Without a Physical NIC
.sp
.LP
First, create an etherstub with name
.BR stub1 :

.sp
.in +2
.nf
# \fBdladm create-etherstub stub1\fR
.fi
.in -2
.sp

.sp
.LP
Create two VNICs with names
.B hello0
and
.B test1
on the etherstub.
This operation implicitly creates a virtual switch connecting
.BR hello0
and
.BR test1 .

.sp
.in +2
.nf
# \fBdladm create-vnic -l stub1 hello0\fR
# \fBdladm create-vnic -l stub1 test1\fR
.fi
.in -2
.sp

.LP
.B Example 17
Showing Network Usage
.sp
.LP
Network usage statistics can be stored using the extended accounting
facility,
.BR acctadm (1M).

.sp
.in +2
.nf
# \fBacctadm -e basic -f /var/log/net.log net\fR
# \fBacctadm net\fR
          Network accounting: active
     Network accounting file: /var/log/net.log
   Tracked Network resources: basic
 Untracked Network resources: src_ip,dst_ip,src_port,dst_port,protocol,
                              dsfield
.fi
.in -2
.sp

.sp
.LP
The saved historical data can be retrieved in summary form using the
.B show-usage
subcommand:

.sp
.in +2
.nf
# \fBdladm show-usage -f /var/log/net.log\fR
LINK      DURATION  IPACKETS RBYTES      OPACKETS OBYTES      BANDWIDTH
e1000g0   80        1031     546908      0        0           2.44 Kbps
.fi
.in -2
.sp

.LP
.B Example 18
Displaying Bridge Information
.sp
.LP
The following commands use the
.B show-bridge
subcommand with no and
various options.

.sp
.in +2
.nf
# \fBdladm show-bridge\fR
BRIDGE       PROTECT ADDRESS           PRIORITY DESROOT
foo          stp     32768/8:0:20:bf:f 32768    8192/0:d0:0:76:14:38
bar          stp     32768/8:0:20:e5:8 32768    8192/0:d0:0:76:14:38

# \fBdladm show-bridge -l foo\fR
LINK         STATE        UPTIME   DESROOT
hme0         forwarding   117      8192/0:d0:0:76:14:38
qfe1         forwarding   117      8192/0:d0:0:76:14:38

# \fBdladm show-bridge -s foo\fR
BRIDGE       DROPS        FORWARDS
foo          0            302

# \fBdladm show-bridge -ls foo\fR
LINK         DROPS     RECV      XMIT
hme0         0         360832    31797
qfe1         0         322311    356852

# \fBdladm show-bridge -f foo\fR
DEST              AGE     FLAGS  OUTPUT
8:0:20:bc:a7:dc   10.860  --     hme0
8:0:20:bf:f9:69   --      L      hme0
8:0:20:c0:20:26   17.420  --     hme0
8:0:20:e5:86:11   --      L      qfe1
.fi
.in -2
.sp

.LP
.B Example 19
Creating an IPv4 Tunnel
.sp
.LP
The following sequence of commands creates and then displays a persistent
IPv4 tunnel link named
.B mytunnel0
between 66.1.2.3 and 192.4.5.6:

.sp
.in +2
.nf
# \fBdladm create-iptun -T ipv4 -s 66.1.2.3 -d 192.4.5.6 mytunnel0\fR
# \fBdladm show-iptun mytunnel0\fR
LINK            TYPE  FLAGS  SOURCE              DESTINATION
mytunnel0       ipv4  --     66.1.2.3            192.4.5.6
.fi
.in -2
.sp

.sp
.LP
A point-to-point IP interface can then be created over this tunnel link:

.sp
.in +2
.nf
# \fBifconfig mytunnel0 plumb 10.1.0.1 10.1.0.2 up\fR
.fi
.in -2
.sp

.sp
.LP
As with any other IP interface, configuration persistence for this IP
interface is achieved by placing the desired
.B ifconfig
commands (in
this case, the command for "\fB10.1.0.1 10.1.0.2\fR") into
.BR /etc/hostname.mytunnel0 .

.LP
.B Example 20
Creating a 6to4 Tunnel
.sp
.LP
The following command creates a 6to4 tunnel link. The IPv4 address of the
6to4 router is 75.10.11.12.

.sp
.in +2
.nf
# \fBdladm create-iptun -T 6to4 -s 75.10.11.12 sitetunnel0\fR
# \fBdladm show-iptun sitetunnel0\fR
LINK            TYPE  FLAGS  SOURCE              DESTINATION
sitetunnel0     6to4  --     75.10.11.12         --
.fi
.in -2
.sp

.sp
.LP
The following command plumbs an IPv6 interface on this tunnel:

.sp
.in +2
.nf
# \fBifconfig sitetunnel0 inet6 plumb up\fR
# \fBifconfig sitetunnel0 inet6\fR
sitetunnel0: flags=2200041 <UP,RUNNING,NONUD,IPv6> mtu 65515 index 3
        inet tunnel src 75.10.11.12
        tunnel hop limit 64
        inet6 2002:4b0a:b0c::1/16
.fi
.in -2
.sp

.sp
.LP
Note that the system automatically configures the IPv6 address on the 6to4
IP interface. See \fBifconfig\fR(1M) for a description of how IPv6 addresses
are configured on 6to4 tunnel links.

.SH ATTRIBUTES
.sp
.LP
See
.BR attributes (5)
for descriptions of the following attributes:
.sp
.LP
.B /usr/sbin
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
AvailabilitySUNWcsu
_
Interface StabilityCommitted
.TE

.sp
.LP
.B /sbin
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
AvailabilitySUNWcsr
_
Interface StabilityCommitted
.TE

.SH SEE ALSO
.sp
.LP
.BR acctadm (1M),
.BR autopush (1M),
.BR ifconfig (1M),
.BR ipsecconf (1M),
.BR ndd (1M),
.BR psrset (1M),
.BR wpad (1M),
.BR zonecfg (1M),
.BR attributes (5),
.BR ieee802.3 (5),
.BR dlpi (7P)
.SH NOTES
.sp
.LP
The preferred method of referring to an aggregation in the aggregation
subcommands is by its link name. Referring to an aggregation by its integer
.I key
is supported for backward compatibility, but is not necessary.
When creating an aggregation, if a
.I key
is specified instead of a link
name, the aggregation's link name will be automatically generated by
\fBdladm\fR as \fBaggr\fIkey\fR.
