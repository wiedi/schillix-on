'\" te
.\" Copyright (c) 1998, Sun Microsystems, Inc.   All Rights Reserved
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.TH pam_sm_open_session 3PAM "13 Oct 1998" "SunOS 5.11" "PAM Library Functions"
.SH NAME
pam_sm_open_session, pam_sm_close_session \- service provider
implementation for pam_open_session and pam_close_session
.SH SYNOPSIS
.LP
.nf
\fBcc\fR [ \fIflag\fR .\|.\|. ]  \fIfile\fR .\|.\|. \fB-lpam\fR [ \fIlibrary\fR .\|.\|. ]
#include <security/pam_appl.h>
#include <security/pam_modules.h>



\fBint\fR \fBpam_sm_open_session\fR(\fBpam_handle_t *\fIpamh\fR, \fBint\fR \fIflags\fR,
     \fBint\fR \fIargc\fR, \fBconst char **\fIargv\fR);
.fi

.LP
.nf
\fBint\fR \fBpam_sm_close_session\fR(\fBpam_handle_t *\fIpamh\fR, \fBint\fR \fIflags\fR,
     \fBint\fR \fIargc\fR, \fBconst char **\fIargv\fR);
.fi

.SH DESCRIPTION
.sp
.LP
In response to a call to
.BR pam_open_session "(3PAM) and"
.BR pam_close_session (3PAM),
the
.B PAM
framework calls
.B pam_sm_open_session()
and
.BR pam_sm_close_session() ,
respectively
from the modules listed in the
.BR pam.conf (4)
file.  The session
management provider supplies the back-end functionality for this interface
function.
.sp
.LP
The
.B pam_sm_open_session()
function is called to initiate session
management. The\fBpam_sm_close_session()\fR function is invoked when a
session has terminated. The argument
.I pamh
is an authentication handle.
The following flag may be set in the
.I flags
field:
.sp
.ne 2
.mk
.na
.B PAM_SILENT
.ad
.RS 14n
.rt
Session service should not generate any messages.
.RE

.sp
.LP
The
.I argc
argument represents the number of module options passed in
from the configuration file
.BR pam.conf (4).
.I argv
specifies the
module options, which are interpreted and processed by the session
management service. If an unknown option is passed in, an error should be
logged through
.BR syslog "(3C) and the option ignored."
.SH RETURN VALUES
.sp
.LP
Upon successful completion,
.B PAM_SUCCESS
should be returned. The
following values may also be returned upon error:
.sp
.ne 2
.mk
.na
.B PAM_SESSION_ERR
.ad
.RS 19n
.rt
Cannot make or remove an entry for the specified session.
.RE

.sp
.ne 2
.mk
.na
.B PAM_IGNORE
.ad
.RS 19n
.rt
Ignore underlying session module regardless of whether the control flag is
.IR required ,
.I optional
or \fIsufficient\fR.
.RE

.SH ATTRIBUTES
.sp
.LP
See
.BR attributes (5)
for description of the following attributes:
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
Interface Stability Stable
_
MT-LevelMT-Safe with exceptions
.TE

.SH SEE ALSO
.sp
.LP
.BR pam (3PAM),
.BR pam_open_session (3PAM),
.BR syslog (3C),
.BR libpam (3LIB),
.BR pam.conf (4),
.BR attributes (5)
.SH NOTES
.sp
.LP
The interfaces in
.B libpam
are MT-Safe only if each thread within the
multithreaded application uses its own
.B PAM
handle.
