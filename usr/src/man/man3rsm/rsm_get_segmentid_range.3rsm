'\" te
.\" Copyright (c) 2003, Sun Microsystems, Inc.  All rights reserved.
.\" Copyright (c) 2012-2013, J. Schilling
.\" Copyright (c) 2013, Andreas Roehler
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License ("CDDL"), version 1.0.
.\" You may only use this file in accordance with the terms of version
.\" 1.0 of the CDDL.
.\"
.\" A full copy of the text of the CDDL should have accompanied this
.\" source.  A copy of the CDDL is also available via the Internet at
.\" http://www.opensource.org/licenses/cddl1.txt
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.TH rsm_get_segmentid_range 3RSM "8 May 2003" "SunOS 5.11" "Remote Shared Memory Library Functions"
.SH NAME
rsm_get_segmentid_range \- get segment ID range
.SH SYNOPSIS
.LP
.nf
cc [ \fIflag\fR.\|.\|. ] \fIfile\fR.\|.\|. -lrsm [ \fIlibrary\fR.\|.\|. ]
#include <rsmapi.h>

\fBint\fR \fBrsm_get_segmentid_range\fR(\fBconst char *\fIappid\fR,
     \fBrsm_memseg_id_t *\fIbaseid\fR, \fBuint32_t *\fIlength\fR);
.fi

.SH DESCRIPTION
.sp
.LP
RSM segment IDs can be either specified by the application or generated by
the system using the 
.BR rsm_memseg_export_publish (3RSM)
function.
Applications that specify segment IDs require a reserved range of segment
IDs that they can use. This can be achieved by using
.B rsm_get_segmentid_range()
and by reserving a range of segment IDs in
the segment ID configuration file,
.BR /etc/rsm/rsm.segmentid .
The
.B rsm_get_segmentid_range()
function can be used by applications to
obtain the segment ID range reserved for them. The
.I appid
argument is a
null-terminated string that identifies the application. The
.I baseid
argument points to the location where the starting segment ID of the
reserved range is returned. The
.I length
argument points to the location
where the number of reserved segment IDs is returned.
.sp
.LP
The application can use any value starting at
.I baseid
and less than
\fIbaseid\fR+\fIlength\fR. The application should use an offset within the
range of reserved segment IDs to obtain a segment ID such that if the
.I baseid
or
.I length
is modified, it will still be within its
reserved range.
.sp
.LP
It is the responsibility of the system administrator to make sure that the
segment ID ranges are properly administered (such that they are
non-overlapping, the file on various nodes of the cluster have identical
entries, and so forth.) Entries in the
.B /etc/rsm/rsm.segmentid
file are
of the form:
.sp
.in +2
.nf
#keyword	     appid    baseid    length
reserved     SUNWfoo  0x600000  1000
.fi
.in -2
.sp

.sp
.LP
The fields in the file are separated by tabs or blanks. The first string is
a keyword "reserve", followed by the application identifier (a string
without spaces), the baseid (the starting segment ID of the reserved range
in hexadecimal), and the length (the number of segmentids reserved). Comment
lines contain a "#" in the first column. The file should not contain blank
or empty lines. Segment IDs reserved for the system are defined in the
.RB < /usr/include/rsm/rsm_common.h >
header and cannot be used by the
applications.
.SH RETURN VALUES
.sp
.LP
Upon successful completion, these functions return 0. Otherwise, an error
value is returned to indicate the error.
.SH ERRORS
.sp
.LP
The
.B rsm_get_segmentid_range()
function can return the following
errors:
.sp
.ne 2
.mk
.na
.B RSMERR_BAD_ADDR
.ad
.RS 21n
.rt
The address passed is invalid.
.RE

.sp
.ne 2
.mk
.na
.B RSMERR_BAD_APPID
.ad
.RS 21n
.rt
The
.I appid
is not defined in configuration file.
.RE

.sp
.ne 2
.mk
.na
.B RSMERR_BAD_CONF
.ad
.RS 21n
.rt
The configuration file is not present or not readable, or the configuration
file format is incorrect.
.RE

.SH ATTRIBUTES
.sp
.LP
See
.BR attributes (5)
for descriptions of the following attributes:
.sp

.sp
.TS
tab() box;
lw(2.75i) |lw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPE ATTRIBUTE VALUE
_
Interface StabilityUnstable
_
MT-LevelMT-Safe
.TE

.SH SEE ALSO
.sp
.LP
.BR rsm_memseg_export_publish (3RSM),
.BR attributes (5)
