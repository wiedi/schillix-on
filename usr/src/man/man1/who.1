'\" te
.\" Copyright 1989 AT&T
.\" Copyright (c) 2000, Sun Microsystems, Inc.  All Rights Reserved
.\" Portions Copyright (c) 1992, X/Open Company Limited  All Rights Reserved
.\"
.\" Sun Microsystems, Inc. gratefully acknowledges The Open Group for
.\" permission to reproduce portions of its copyrighted documentation.
.\" Original documentation from The Open Group can be obtained online
.\" at http://www.opengroup.org/bookstore/.
.\"
.\" The Institute of Electrical and Electronics Engineers and The Open Group,
.\" have given us permission to reprint portions of their documentation.
.\"
.\" In the following statement, the phrase "this text" refers to portions
.\" of the system documentation.
.\"
.\" Portions of this text are reprinted and reproduced in electronic form in
.\" the Sun OS Reference Manual, from IEEE Std 1003.1, 2004 Edition, Standard
.\" for Information Technology -- Portable Operating System Interface (POSIX),
.\" The Open Group Base Specifications Issue 6, Copyright (C) 2001-2004 by the
.\" Institute of Electrical and Electronics Engineers, Inc and The Open Group.
.\" In the event of any discrepancy between these versions and the original
.\" IEEE and The Open Group Standard, the original IEEE and The Open Group
.\" Standard is the referee document.
.\"
.\" The original Standard can be obtained online at
.\" http://www.opengroup.org/unix/online.html.
.\"
.\" This notice shall appear on any product containing this material.
.\"
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.TH who 1 "3 Nov 2000" "SunOS 5.11" "User Commands"
.SH NAME
who \- who is on the system
.SH SYNOPSIS
.LP
.nf
\fB/usr/bin/who\fR [\fB-abdHlmpqrstTu\fR] [\fIfile\fR]
.fi

.LP
.nf
\fB/usr/bin/who\fR \fB-q\fR [\fB-n\fR \fIx\fR] [\fIfile\fR]
.fi

.LP
.nf
\fB/usr/bin/who\fR am i
.fi

.LP
.nf
\fB/usr/bin/who\fR am I
.fi

.LP
.nf
\fB/usr/xpg4/bin/who\fR [\fB-abdHlmpqrtTu\fR] [\fIfile\fR]
.fi

.LP
.nf
\fB/usr/xpg4/bin/who\fR \fB-q\fR [\fB-n\fR \fIx\fR] [\fIfile\fR]
.fi

.LP
.nf
\fB/usr/xpg4/bin/who\fR \fB-s\fR [\fB-bdHlmpqrtu\fR] [\fIfile\fR]
.fi

.LP
.nf
\fB/usr/xpg4/bin/who\fR am i
.fi

.LP
.nf
\fB/usr/xpg4/bin/who\fR am I
.fi

.SH DESCRIPTION
.sp
.LP
The
.B who
utility can list the user's name, terminal line, login time,
elapsed time since activity occurred on the line, and the process-ID of the
command interpreter (shell) for each current UNIX system user. It examines the
\fB/var/adm/utmpx\fR file to obtain its information. If \fIfile\fR is given, that
file (which must be in
.BR utmpx (4)
format) is examined. Usually, \fIfile\fR
will be
.BR /var/adm/wtmpx ,
which contains a history of all the logins since
the file was last created.
.sp
.LP
The general format for output is:
.sp
.in +2
.nf
\fIname\fR [\fIstate\fR] \fIline time\fR [\fIidle\fR] [\fIpid\fR] [\fIcomment\fR] [\fIexit\fR]
.fi
.in -2
.sp

.sp
.LP
where:
.sp
.ne 2
.mk
.na
.I name
.ad
.RS 12n
.rt
User's login name
.RE

.sp
.ne 2
.mk
.na
.I state
.ad
.RS 12n
.rt
Capability of writing to the terminal
.RE

.sp
.ne 2
.mk
.na
.I line
.ad
.RS 12n
.rt
Name of the line found in
.BR /dev
.RE

.sp
.ne 2
.mk
.na
.I time
.ad
.RS 12n
.rt
Time since user's login
.RE

.sp
.ne 2
.mk
.na
.I idle
.ad
.RS 12n
.rt
Time elapsed since the user's last activity
.RE

.sp
.ne 2
.mk
.na
.I pid
.ad
.RS 12n
.rt
User's process id
.RE

.sp
.ne 2
.mk
.na
.I comment
.ad
.RS 12n
.rt
Comment line in
.BR inittab (4)
.RE

.sp
.ne 2
.mk
.na
.I exit
.ad
.RS 12n
.rt
Exit status for dead processes
.RE

.SH OPTIONS
.sp
.LP
The following options are supported:
.sp
.ne 2
.mk
.na
.B -a
.ad
.RS 9n
.rt
Processes
.B /var/adm/utmpx
or the named \fIfile\fR with
.BR -b ,
.BR -d ,
.BR -l ,
.BR -p ,
.BR -r ,
.BR -t ,
.BR -T ,
and
.B -u
options turned
on.
.RE

.sp
.ne 2
.mk
.na
.B -b
.ad
.RS 9n
.rt
Indicates the time and date of the last reboot.
.RE

.sp
.ne 2
.mk
.na
.B -d
.ad
.RS 9n
.rt
Displays all processes that have expired and not been respawned by
.BR init .
The
.B exit
field appears for dead processes and contains the termination and
exit values (as returned by \fBwait\fR(3UCB)), of the dead process. This can be
useful in determining why a process terminated.
.RE

.sp
.ne 2
.mk
.na
.B -H
.ad
.RS 9n
.rt
Outputs column headings above the regular output.
.RE

.sp
.ne 2
.mk
.na
.B -l
.ad
.RS 9n
.rt
Lists only those lines on which the system is waiting for someone to login. The
\fIname\fR field is \fBLOGIN\fR in such cases. Other fields are the same as for
user entries except that the
.I state
field does not exist.
.RE

.sp
.ne 2
.mk
.na
.B -m
.ad
.RS 9n
.rt
Outputs only information about the current terminal.
.RE

.sp
.ne 2
.mk
.na
\fB-n\fR \fIx\fR
.ad
.RS 9n
.rt
Takes a numeric argument,
.IR x ,
which specifies the number of users to
display per line.
.I x
must be at least
.BR 1 .
The
.B -n
option can only
be used with
.BR -q .
.RE

.sp
.ne 2
.mk
.na
.B -p
.ad
.RS 9n
.rt
Lists any other process that is currently active and has been previously spawned
by
.BR init .
The
.I name
field is the name of the program executed by
\fBinit\fR as found in
.BR /sbin/inittab .
The
.IR state ,
.IR line ,
and
\fIidle\fR fields have no meaning. The \fIcomment\fR field shows the \fBid\fR
field of the line from
.B /sbin/inittab
that spawned this process. See
.BR inittab (4).
.RE

.sp
.ne 2
.mk
.na
.B -q
.ad
.RS 9n
.rt
(Quick
.BR who )
Displays only the names and the number of users currently
logged on. When this option is used, all other options are ignored.
.RE

.sp
.ne 2
.mk
.na
.B -r
.ad
.RS 9n
.rt
Indicates the current
.I run-level
of the
.B init
process.
.RE

.sp
.ne 2
.mk
.na
.B -s
.ad
.RS 9n
.rt
(Default) Lists only the
.IR name ,
.IR line ,
and
.I time
fields.
.RE

.SS "/usr/bin/who"
.sp
.ne 2
.mk
.na
.B -T
.ad
.RS 7n
.rt
Same as the
.B -s
option, except that the
.IR "state idle" ,
.IR pid ,
and
.IR comment ,
fields are also written.
.I state
is one of the following
characters:
.sp
.ne 2
.mk
.na
.B +
.ad
.RS 9n
.rt
The terminal allows write access to other users.
.RE

.sp
.ne 2
.mk
.na
\fB\(mi\fR
.ad
.RS 9n
.rt
The terminal denies write access to other users.
.RE

.sp
.ne 2
.mk
.na
.B ?
.ad
.RS 9n
.rt
The terminal write-access state cannot be determined.
.RE

.RE

.SS "/usr/xpg4/bin/who"
.sp
.ne 2
.mk
.na
.B -T
.ad
.RS 7n
.rt
Same as the
.B -s
option, except that the
.I state
field is also written.
\fIstate\fR is one of the characters listed under the \fB/usr/bin/who\fR version
of this option. If the
.B -u
option is used with
.BR -T ,
the idle time is
added to the end of the previous format.
.RE

.sp
.ne 2
.mk
.na
.B -t
.ad
.RS 7n
.rt
Indicates the last change to the system clock (using the
.B date
utility) by
.BR root .
See
.BR su "(1M) and"
.BR date (1).
.RE

.sp
.ne 2
.mk
.na
.B -u
.ad
.RS 7n
.rt
Lists only those users who are currently logged in. The
.I name
is the user's
login name. The
.I line
is the name of the line as found in the directory
.BR /dev .
The
.I time
.RI "is the time that the user logged in. The" " idle"
column contains the number of hours and minutes since activity last occurred on
that particular line. A dot (\fB\&.\fR) indicates that the terminal has seen
activity in the last minute and is therefore ``current.'' If more than
twenty-four hours have elapsed or the line has not been used since boot time, the
entry is marked
.BR old .
This field is useful when trying to determine whether
a person is working at the terminal or not. The
.I pid
is the process-ID of
the user's shell. The
.I comment
is the comment field associated with this
line as found in
.B /sbin/inittab
(see
.BR inittab (4)).
This can contain
information about where the terminal is located, the telephone number of the
dataset, type of terminal if hard-wired, and so forth.
.RE

.SH OPERANDS
.sp
.LP
The following operands are supported:
.sp
.ne 2
.mk
.na
.B am i
.ad
.br
.na
.B am I
.ad
.RS 9n
.rt
In the "C" locale, limits the output to describing the invoking user, equivalent
to the
.B -m
option. The
.B am
and
.B i
or
.B I
must be separate
arguments.
.RE

.sp
.ne 2
.mk
.na
\fIfile\fR
.ad
.RS 9n
.rt
Specifies a path name of a file to substitute for the database of logged-on
users that
.B who
uses by default.
.RE

.SH ENVIRONMENT VARIABLES
.sp
.LP
See
.BR environ (5)
for descriptions of the following environment variables
that affect the execution of
.BR who :
.BR LANG ,
.BR LC_ALL ,
.BR LC_CTYPE ,
.BR LC_MESSAGES ,
.BR LC_TIME ,
and
.BR NLSPATH .
.SH EXIT STATUS
.sp
.LP
The following exit values are returned:
.sp
.ne 2
.mk
.na
.B 0
.ad
.RS 7n
.rt
Successful completion.
.RE

.sp
.ne 2
.mk
.na
.B >0
.ad
.RS 7n
.rt
An error occurred.
.RE

.SH FILES
.sp
.ne 2
.mk
.na
.B /sbin/inittab
.ad
.RS 19n
.rt
Script for
.BR init
.RE

.sp
.ne 2
.mk
.na
.B /var/adm/utmpx
.ad
.RS 19n
.rt
Current user and accounting information
.RE

.sp
.ne 2
.mk
.na
.B /var/adm/wtmpx
.ad
.RS 19n
.rt
Historic user and accounting information
.RE

.SH ATTRIBUTES
.sp
.LP
See
.BR attributes (5)
for descriptions of the following attributes:
.SS "/usr/bin/who"
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
AvailabilitySUNWcsu
.TE

.SS "/usr/xpg4/bin/who"
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
AvailabilitySUNWxcu4
_
Interface StabilityStandard
.TE

.SH SEE ALSO
.sp
.LP
.BR date (1),
.BR login (1),
.BR mesg (1),
.BR init (1M),
.BR su (1M),
.BR wait (3UCB),
.BR inittab (4),
.BR utmpx (4),
.BR attributes (5),
.BR environ (5),
.BR standards (5)
.SH NOTES
.sp
.LP
\fBSuperuser:\fR After a shutdown to the single-user state, \fBwho\fR returns a
prompt. Since
.B /var/adm/utmpx
is updated at login time and there is no login
in single-user state,
.B who
cannot report accurately on this state. The
command,
.BR "who am i" ,
however, returns the correct information.
