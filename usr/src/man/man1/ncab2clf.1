'\" te
.\" Copyright (C) 2001, Sun Microsystems, Inc. All Rights Reserved
.\" CDDL HEADER START
.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\" CDDL HEADER END
.TH ncab2clf 1 "28 Sep 2001" "SunOS 5.11" "User Commands"
.SH NAME
ncab2clf \- convert binary log file to Common Log File format
.SH SYNOPSIS
.LP
.nf
\fB/usr/bin/ncab2clf\fR [\fB-Dhv\fR] [\fB-i\fR \fIinput-file\fR] [\fB-o\fR \fIoutput-file\fR]
     [\fB-b\fR \fIsize\fR] [\fB-n\fR \fInumber\fR] [\fB-s\fR \fIdatetime\fR]
.fi

.SH DESCRIPTION
.sp
.LP
The
.B ncab2clf
command is used to convert the log file generated by the
Solaris Network Cache and Accelerator ("\fBNCA\fR") from binary format, to
Common Log File ("\fBCLF\fR") format. If no \fIinput-file\fR is specified,
.B ncab2clf
uses
.BR stdin .
If no
.I output-file
is specified, the
output goes to
.BR stdout .
.SH OPTIONS
.sp
.ne 2
.mk
.na
.B -b
.ad
.RS 18n
.rt
Specifies the binary-log-file blocking in kilobytes; the default is 64
Kbyte.
.RE

.sp
.ne 2
.mk
.na
.B -D
.ad
.RS 18n
.rt
Specifies that direct
.B I/O
be disabled.
.RE

.sp
.ne 2
.mk
.na
.B -h
.ad
.RS 18n
.rt
Prints usage message.
.RE

.sp
.ne 2
.mk
.na
.B -i
.I input-file
.ad
.RS 18n
.rt
Specifies the input file.
.RE

.sp
.ne 2
.mk
.na
.B -n
.I number
.ad
.RS 18n
.rt
Output
.I number
CLF records.
.RE

.sp
.ne 2
.mk
.na
.B -o
.I output-file
.ad
.RS 18n
.rt
Specifies the output file.
.RE

.sp
.ne 2
.mk
.na
.B -s
.I datetime
.ad
.RS 18n
.rt
Skip any records before the date and time specified in
.IR datetime .
You
can specify the date and time in CLF format or in the format specified by
the
.BR touch (1)
utility. CLF format is the dominant format, so
.B ncab2clf
first analyzes
.I datetime
assuming CLF.
.RE

.sp
.ne 2
.mk
.na
.B -v
.ad
.RS 18n
.rt
Provides verbose output.
.RE

.SH EXAMPLES
.LP
.B Example 1
Converting a Binary File to a Common Log File Format
.sp
.LP
The following example converts the binary file \fB/var/nca/logs/nca.blf\fR
to a file
.BR /var/nca/logs/nca.clf ,
which is in Common Log File format.

.sp
.in +2
.nf
example% \fBncab2clf -D -i /var/nca/logs/nca.blf -o /var/nca/logs/nca.clf\fR
.fi
.in -2
.sp

.LP
.B Example 2
Converting Multiple Log Files
.sp
.LP
The following script may be used to convert multiple log files. The
directory designated by "\fB*\fR" must only contain log files.

.sp
.in +2
.nf
!/bin/ksh
for filename in *
do
    ncab2clf -D < $filename > $filename.clf
done
.fi
.in -2

.LP
.B Example 3
Using
.B -s
and
.B -n
on a Raw Device
.sp
.LP
The following example shows how
.B ncab2clf
can be used on a raw device.
If not using the
.B -n
option, the default is to convert all records from
the starting location to the end of the file. The date and time specified
with
.BR -s ,
below, is in CLF format.

.sp
.in +2
.nf
example% ncab2clf -s '10/Apr/2001:09:23:13' -n 100 < /dev/dsk/c2t1d0s6
.fi
.in -2
.sp

.SH EXIT STATUS
.sp
.LP
The following exit values are returned:
.sp
.ne 2
.mk
.na
.B 0
.ad
.RS 6n
.rt
The file converted successfully
.RE

.sp
.ne 2
.mk
.na
.B >0
.ad
.RS 6n
.rt
An error occurred.
.RE

.SH ATTRIBUTES
.sp
.LP
See
.BR attributes (5)
for descriptions of the following attributes:
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i)
lw(2.75i) |lw(2.75i)
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
AvailabilitySUNWncau
_
Interface StabilityEvolving
.TE

.SH SEE ALSO
.sp
.LP
.BR nca (1),
.BR ncakmod (1),
.BR nca.if (4),
.BR ncakmod.conf (4),
.BR ncalogd.conf (4),
.BR attributes (5)
.sp
.LP
.I System Administration Guide: IP Services
.SH NOTES
.sp
.LP
The binary log files generated by
.B NCA
can become very large. When
converting these large binary files, use the
.B -b
option to the
.B ncab2clf
command to help performance.
.sp
.LP
Direct
.B I/O
is a benefit to the user if the data being written does
not come in as large chunks. However, if the user wishes to convert the log
file in large chunks using the
.B -b
option, then direct
.B I/O
should
be disabled by using the
.B -D
option.
